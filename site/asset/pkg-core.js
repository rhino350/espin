define("modules/clean/accessibility/utils",["require","exports","modules/clean/keycode"],function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.accessibleColorPalette=["#006AFF","#0073E1","#007BC3","#007F9B","#008578","#008750","#008928","#008800","#0573EB","#0579C3","#0580A0","#05857D","#058655","#058932","#05890A","#0A71F0","#0A78CD","#0A7FAA","#0A8487","#0A855F","#0A8737","#0A880F","#0F6EF5","#0F76D7","#0F7DB4","#0F818C","#0F8669","#0F8741","#0F8819","#146DFF","#1475DC","#147BBE","#14819B","#148473","#14864B","#148723","#1969FF","#1972E1","#1979C3","#1980A0","#198278","#198550","#198728","#198700","#1E70E6","#1E79C8","#1E7FA5","#1E837D","#1E8555","#1E8832","#1E880A","#236EEB","#2376D2","#237CAF","#238187","#23845F","#23883C","#238914","#286DF5","#2876D7","#287CB4","#28808C","#288469","#288541","#288619","#2D6AFA","#2D73DC","#2D7BB9","#2D8096","#2D836E","#2D8446","#2D8823","#3267FF","#3271E1","#3279C3","#327D9B","#328378","#328550","#328528","#328600","#376EE6","#3777C8","#377DA5","#37807D","#37855A","#378632","#37860A","#3C6CEB","#3C74CD","#3C7BAA","#3C8087","#3C835F","#3C8437","#3C8614","#416AF5","#4173D7","#4179B9","#417E91","#418069","#418341","#418419","#4667FA","#466FDC","#4676BE","#467B9B","#468073","#46824B","#468423","#4B63FF","#4B6DE1","#4B75BE","#4B7B9B","#4B8078","#4B8150","#4B8228","#4B8300","#5069E6","#5072C8","#5079A5","#507C7D","#50815A","#508232","#50830A","#5567F0","#556FD2","#5575AA","#557A87","#557E5F","#55823C","#558314","#5A65F5","#5A6DD7","#5A75B4","#5A7A91","#5A7D69","#5A7F41","#5A821E","#5F61FA","#5F69DC","#5F71BE","#5F779B","#5F7E50","#5F7F28","#5F8100","#6466E6","#646DC3","#6475A5","#647D55","#647E2D","#648005","#6964EB","#696BC8","#6972A5","#697C55","#697E2D","#697F05","#6E62EB","#6E6AC8","#6E71A5","#6E7C46","#6E7E1E","#7358FF","#7363E1","#736ABE","#7372A0","#785CEB","#7864CD","#786DAF","#7D53FF","#7D5EE1","#7D66C3","#7D6EA0","#8255F5","#825FD7","#8268B9","#826D91","#8756F0","#8760D2","#8766AA","#8C4AFF","#8C56E6","#8C60C8","#8C66A0","#914BF5","#9157DC","#9160BE","#916596","#964BEB","#9655D2","#965EAF","#966691","#9B47F0","#9B51D2","#9B5CB4","#9B6191","#A041F5","#A04EDC","#A058B9","#A06196","#A53BF5","#A548DC","#A553BE","#A55A96","#AA34FA","#AA42E6","#AA4FC8","#AA58A0","#AA5F78","#AA614B","#AA6623","#AF29FF","#AF38E6","#AF47D2","#AF52AF","#AF5782","#AF5E5A","#AF622D","#AF6400","#B42CF0","#B43CD7","#B447B4","#B45291","#B45864","#B45D37","#B45D05","#B919FF","#B92CE6","#B93BC8","#B94AAA","#B9547D","#B95B4B","#B95A14","#BE0CF0","#BE1FEB","#BE31CD","#BE41B4","#BE4C87","#BE5455","#BE561E","#C307EB","#C31AE1","#C32CC8","#C33DB4","#C3488C","#C34F5A","#C35428","#C803E1","#C816E1","#C826C3","#C836AF","#C8428C","#C8495F","#C84F32","#C85200","#CD11C8","#CD22C8","#CD31AF","#CD3B87","#CD4664","#CD4B37","#CD4D0A","#D20CC3","#D21CB4","#D229A0","#D23587","#D23E64","#D23F37","#D2430F","#D708AF","#D716A0","#D72291","#D73087","#D7355F","#D73A3C","#D73A14","#DC0596","#DC119B","#DC1D91","#DC256E","#DC2E5A","#DC343C","#DC3419","#E1027D","#E10C87","#E11882","#E11B5A","#E12755","#E12A37","#E12919","#E13200","#E6075F","#E60C4B","#E61655","#E61D46","#E62132","#E61B14","#E61A00","#EB0232","#EB0214","#EB0D30"],e.accessibleTriggerProps=function(t,e){return void 0===e&&(e="button"),{role:e,tabIndex:0,onClick:function(e){return t(e)},onKeyDown:function(e){if(e.keyCode===n.KeyCode.ENTER||e.keyCode===n.KeyCode.SPACE)return t(e)}}}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty,n=function(t,e){return function(){return t.apply(e,arguments)}};define("modules/clean/ajax",["jquery","external/underscore","modules/clean/devtools/perf_hub_actions","modules/clean/stormcrow/stormcrow_panel_actions","modules/clean/job_progress","modules/clean/storage","modules/clean/undo","modules/constants/ajax_strings","modules/constants/debug","modules/constants/request","modules/constants/page_load","modules/core/browser","modules/core/cookies","modules/core/exception","modules/core/html","modules/core/notify","modules/core/uri"],function(e,r,o,i,s,u,a,c,l,d,_,p,h,f,g,m,v){var y,w,b,E,x,A,S,T,O,C,k,F,D,L,R,B,P,M,I,N,q,j,U,H,W,J,G,Q,V,K,z,X,Y,$,Z,tt,et,nt,rt,ot,it,st,ut,at,ct,lt;return q=o.PerfHubActions,G="err:",Q="htmlerr:",J="async_task_started:",W="async_task_err:",H="done:",I="oref",V=function(t,n){var r,o,i,s,u;return null==t&&(t={}),null==n&&(n=[]),null==t.type&&(null!=t.method?(f.reportStack("Use of method property within modules/clean/ajax's Request",{tags:["module:ajax"]}),s=t.method):s="POST",t.type=s),r=new E(t),o=lt(r,n),u=e.ajax({url:o.url(),type:t.type,data:o.data(),dataType:t.dataType||"text",headers:o.headers(),traditional:!0,xhrFields:o.xhrFields(),success:function(t,e,n){return o.success(t,e,n)},error:function(t,e,n){return o.error(t,e,n)},complete:function(t,e){return o.complete(t,e)},async:null==(i=t.async)||i,timeout:t.timeout}),o.request(u)},lt=function(t,e){var n,o,i,s,u,a,c,l;for(o=[t],l=r(e.slice(0)).reverse(),i=0,a=l.length;i<a;i++)n=l[i],o.push(new n);for(u=null,s=0,c=o.length;s<c;s++)n=o[s],u&&(n.next=u),u=n;return u},E=(function(){function t(t){null==t&&(t={}),this.options=function(){return t},this.url=function(){return String(t.url||"")},this.data=function(){return t.data||{}},this.headers=function(){return t.headers||{}},this.xhrFields=function(){return t.xhrFields||{}},this.success=t.success||this.identity,this.error=t.error||this.identity,this.complete=t.complete||this.identity,this.request=this.identity}return t.prototype.identity=function(t){return t},t})(),T=(function(){function t(){}return t.prototype.options=function(){return this.next.options()},t.prototype.url=function(){return this.next.url()},t.prototype.data=function(){return this.next.data()},t.prototype.headers=function(){return this.next.headers()},t.prototype.xhrFields=function(){return this.next.xhrFields()},t.prototype.success=function(t,e,n){return this.next.success(t,e,n)},t.prototype.error=function(t,e,n){return this.next.error(t,e,n)},t.prototype.complete=function(t,e){return this.next.complete(t,e)},t.prototype.request=function(t){return this.next.request(t)},t})(),A=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.SUPPORTED_TLDS=["dropbox.com"],r.prototype.data=function(){var t;return f.assert(this._is_db_domain(),"injecting CSRF token into request to non-dropbox domain"),t={is_xhr:!0},"get"!==(this.options().type||"post").toLowerCase()&&(t.t=h.read("__Host-js_csrf")||""),e.extend(t,this.next.data())},r.prototype._is_db_domain=function(){var t,e;return!(t=v.parse(String(this.url())).authority)||(e=t.split("."),this.SUPPORTED_TLDS.reduce(function(t,n){var r,o;return o=n.split("."),r=e.slice(-1*o.length).join("."),t||n===r},!1))},r})(T),tt=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.data=function(){var t,e;return t=this.next.data(),e=this.options(),e.subject_user&&!t._subject_uid&&(t._subject_uid=String(e.subject_user)),t},n.prototype.headers=function(){var t,e;return t=this.next.headers(),e=this.options(),e.subject_user&&(t["X-DROPBOX-UID"]=String(e.subject_user)),t},n})(T),x=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.error=function(t,e,n){var r,o;return 403===t.status&&(r=u.SessionStorage.get("reload-timestamp"),o=(new Date).getTime(),(!r||o-r>3e4)&&(u.SessionStorage.set("reload-timestamp",o),window.location.reload(!0))),this.next.error(t,e,n)},n})(T),L=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.data=function(){var t;return t=this.next.data(),null!=e.ajaxSettings.restrict&&(t.restrict=e.ajaxSettings.restrict),t},r})(T),K=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.data=function(){var t,n;return t=this.next.data(),d.REQUEST_TRACING_ENABLED&&"post"===this.options().type.toLowerCase()?(n={parent_request_id:d.REQUEST_ID},e.extend(n,t)):t},r})(T),U=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.data=function(){var t,n;return t=this.next.data(),n={},_.PUBLIC_MODE_OVERRIDE&&(n.public_mode_override=1),_.COUNTRY_OVERRIDE&&(n.country_override=_.COUNTRY_OVERRIDE),e.extend(n,t)},r})(T),k=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.url=function(){var t,e;return e=this.next.url(),l.CPROFILE_ENABLED?(t=l.CPROFILE_PARAMETER,0!==t.indexOf("deps:")?v.parse(e).updateQuery({cProfile:t}).toString():e):e},n.prototype.success=function(t,e,n){return q.add_ajax_profile(n,this.url()),this.next.success(t,e,n)},n})(T),F=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.data=function(){var t;return t=this.next.data(),l.STORMCROW_PANEL?e.extend({stormcrow_panel:1},t):t},r.prototype.complete=function(t,e){var n,r;return l.STORMCROW_PANEL&&(r=this.url(),n=t.getResponseHeader("X-Dropbox-Request-Id"),v.parse(r).getPath()!==i.FEATURES_USED_URL&&b({url:i.FEATURES_USED_URL,data:{request_id:n},success:function(t,e,o){return i.add_request_info({url:r,request_id:n,features_used:JSON.parse(t)})}})),this.next.complete(t,e)},r})(T),C=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.error=function(t,e,n){return this._notify_dev(t,e,n),this.next.error(t,e,n)},n.prototype._notify_dev=function(t,e,n){},n})(T),et=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.success=function(t,e,n){var r,o,i,s,u;if(!n.responseText.length)return this.next.error(n,e,"");if(i=!0,o=!1,0===n.responseText.indexOf(G))r=n.responseText.substr(G.length),"{"!==(s=r[0])&&"["!==s||(i=!1);else{if(0!==n.responseText.indexOf(Q))return this.next.success(t,e,n);r=n.responseText.substr(Q.length),o=!0}return u=this.next.error(n,e,r),i&&!this.options().skipNotifyError&&(o&&(r=new g(r)),m.error(r)),u},n.prototype.error=function(t,e,n){return"abort"!==e&&m.error(c.PROBLEM_COMPLETING_REQUEST),this.next.error(t,e,n)},n})(T),R=(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.success=function(t,e,n){var r;if(!this.options().skipErrorHandling){if(!n.responseText.length)return this.next.error(n,e,"");if(0===n.responseText.indexOf(G))return r=n.responseText.substr(G.length),this.next.error(n,e,r)}return this.next.success(t,e,n)},n})(T),nt=(function(e){function r(){return this._clear_working_msg=n(this._clear_working_msg,this),r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.request=function(t){return this.xhr=t,setTimeout((function(t){return function(){if(!t._request_finished())return t._should_show_working_msg()?(t._show_working_msg(),t.xhr.done(t._clear_working_msg)):void 0}})(this),4e3),this.next.request(this.xhr)},r.prototype._request_finished=function(){return 4===this.xhr.readyState},r.prototype._should_show_working_msg=function(){return m.isShown()&&m.current()!==a.undo_notification},r.prototype._show_working_msg=function(){return this.notification=m.success(c.STILL_WORKING)},r.prototype._clear_working_msg=function(){if(m.isShown()&&this.notification===m.current())return m.clear()},r})(T),j=(function(r){function o(){return this._watch=n(this._watch,this),o.__super__.constructor.apply(this,arguments)}return t(o,r),o.prototype.data=function(){var t,n;return this.job_id=o.generate_job_id(),t=this.next.data(),this.uid=t._subject_uid,n=this.options().subject_user,!this.uid&&n&&(this.uid=String(n)),e.extend({job_id:this.job_id},t)},o.prototype.request=function(t){return this._interval=1e3,this._failures=0,this._watch_count=0,this._watch_id=setInterval(this._watch,this._interval),this.next.request(t)},o.prototype.success=function(t,e,n){return this.next.success(t,e,n)},o.prototype.error=function(t,e,n){return this.next.error(t,e,n)},o.prototype.complete=function(t,e){return this._stop(),s.Job.handled(this.job_id),this.next.complete(t,e)},o.prototype._watch=function(){return s.Job.peek(this.job_id)?this._stop():(this._watch_count++,this._watch_count%10===0&&(clearInterval(this._watch_id),this._interval=Math.min(Math.floor(1.5*this._interval),3e4),this._watch_id=setInterval(this._watch,this._interval)),this._show_progress_modal(),this._fetch_progress())},o.prototype._stop=function(){return clearInterval(this._watch_id),s.ModalProgress.hide()},o.prototype._show_progress_modal=function(){if(!this._modal_shown)return this._modal_shown=!0,s.ModalProgress.show(this.options().progress_text)},o.prototype._fetch_progress=function(){var t;return t={},this.uid&&(t._subject_uid=this.uid),b({url:"/job_status/"+this.job_id,data:t,success:function(t,e,n){var r;return r=0===n.responseText.indexOf("done")?"1/1":n.responseText,s.ModalProgress.update(r)},error:(function(t){return function(e,n,r){if(t._failures++,!(t._failures<3))return t._stop(),t.next.error(e,n,r)}})(this)})},o.generate_job_id=function(){var t,e,n;return t=new Date,n=t.getTime().toString(),e=Math.floor(1e6*Math.random()).toString(),e=("000000"+e).substring(e.length),n+e},o})(T),w=(function(e){function r(){return this._watch=n(this._watch,this),r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.data=function(){var t,e;return t=this.next.data(),this.uid=t._subject_uid,e=this.options().subject_user,!this.uid&&e&&(this.uid=String(e)),t},r.prototype.success=function(t,e,n){return this._is_async_job_response(n)?(this.job_id=n.responseText.split(":")[1],this._interval=1e3,this._failures=0,this._watch_count=0,this._watch_id=setInterval(this._watch,this._interval)):this.next.success(t,e,n)},r.prototype.complete=function(t,e){if(!this._is_async_job_response(t))return this.next.complete(t,e)},r.prototype._is_async_job_response=function(t){var e,n;return 0===(null!=(n=t.responseText)?n.indexOf(J):void 0)&&(e=t.responseText.split(":")[1],e.match(/^[A-Za-z0-9_\-=]*$/))},r.prototype._watch=function(){return s.Job.peek(this.job_id)?this._stop():(this._watch_count++,this._watch_count%10===0&&(clearInterval(this._watch_id),this._interval=Math.min(Math.floor(1.5*this._interval),3e4),this._watch_id=setInterval(this._watch,this._interval)),this._show_progress_modal(),this._fetch_progress())},r.prototype._stop=function(){return clearInterval(this._watch_id),s.ModalProgress.hide()},r.prototype._show_progress_modal=function(){if(!this._modal_shown)return this._modal_shown=!0,s.ModalProgress.show(this.options().progress_text)},r.prototype._fetch_progress=function(){var t;return t={},this.uid&&(t._subject_uid=this.uid),$({url:"/async_task_status/"+this.job_id,data:t,success:(function(t){return function(e,n,r){var o,i,u;return u=r.responseText,0===u.indexOf(H)?(s.Job.handled(t.job_id),t._stop(),u=u.substr(H.length),r.responseText=u,t.next.success(u,n,r),t.next.complete(r,n)):0===u.indexOf(G)?(s.Job.handled(t.job_id),t._stop(),o=u.substr(G.length),m.error(o),t.next.error(r,n,o),t.next.complete(r,n)):0===u.indexOf(W)?(s.Job.handled(t.job_id),t._stop(),i=u.substr(W.length),m.error(new g(i)),t.next.complete(r,n)):s.ModalProgress.update(u)}})(this),error:(function(t){return function(e,n,r){if(t._failures++,!(t._failures<3))return t._stop(),t.next.error(e,n,r),t.next.complete(e,n)}})(this)})},r})(T),N=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.data=function(){var t,n;return t=p.get_uri().getQuery()[I],!(null!=(n=this.next.data())?n.oref:void 0)&&t?e.extend({oref:t},this.next.data()):this.next.data()},r})(T),S=(function(r){function o(){this.browser_unload_handler=n(this.browser_unload_handler,this),o.__super__.constructor.apply(this,arguments),this.is_browser_unloading=!1}return t(o,r),o.prototype.browser_unload_handler=function(){this.is_browser_unloading=!0},o.prototype.request=function(t){var n;return e(window).on("beforeunload",this.browser_unload_handler),(n=this.next).request.apply(n,arguments)},o.prototype.error=function(t,e,n){var r,o,i;return r=0===t.status&&0===t.readyState&&"error"===e&&!n,o=r&&this.is_browser_unloading,o?this.next.error(t,"abort","unload"):(i=this.next).error.apply(i,arguments)},o.prototype.complete=function(){var t;return e(window).off("beforeunload",this.browser_unload_handler),(t=this.next).complete.apply(t,arguments)},o})(T),ct=[S],y=[tt,A,x,L],M=[nt],O=[C,k,F,K,U],P=[w],ot=[].concat(ct,M,et,O,y,P),ut=function(t){return null==t&&(t={}),V(t,ot)},at=function(t){return null==t&&(t={}),V(t,[].concat(N,ot))},D=[].concat(ct,M,R,O,y,P),B=function(t){return null==t&&(t={}),V(t,D)},it=[].concat(ct,M,et,O,y,j,P),st=function(t){return null==t&&(t={}),V(t,it)},b=function(t){return null==t&&(t={}),V(t,[].concat(ct,O,y))},z=[tt,A,L],X=[].concat(ct,O,z),$=function(t){return null==t&&(t={}),V(t,X)},Z=function(t){return null==t&&(t={}),V(t,[].concat(N,X))},rt=function(t){var n,r,o;return null==t&&(t={}),n=new E(t),r=lt(n,y),o=e.ajax({url:r.url(),type:"OPTIONS",data:r.data(),success:function(t,e,n){return r.success(t,e,n)},error:function(t,e,n){return r.error(t,e,n)},complete:function(t,e){return r.complete(t,e)}}),r.request(o)},Y=function(t){var e,n,r,o,i,s,u,a;if(null==t&&(t={}),delete t.success,delete t.error,delete t.complete,null==navigator.sendBeacon)return $(t);null==t.type&&(t.type="POST"),e=new E(t),n=lt(e,[].concat(z,K)),u=n.url(),r=new FormData,i=n.data();for(o in i)a=i[o],null!=a&&""!==a&&r.append(o,a);return s=navigator.sendBeacon(u,r),s?void 0:console.warn("Beacon request failed: "+u)},{Request:V,BackgroundRequest:b,SilentBackgroundRequest:$,SilentBackgroundRequestOref:Z,WebRequest:ut,WebRequestOref:at,FormWebRequest:B,WebProgressRequest:st,ValidationSchemaRequest:rt,SilentBackgroundBeaconRequest:Y}})}.call(this),define("modules/clean/ajax_as_promised",["require","exports","modules/clean/ajax"],function(t,e,n){"use strict";function r(t){return function(e){return new Promise(function(n,r){return t(e).then(n,function(t,e,n){return r({jqXHR:t,textStatus:e,errorThrown:n})})})}}Object.defineProperty(e,"__esModule",{value:!0}),e.Request=r(n.Request),e.BackgroundRequest=r(n.BackgroundRequest),e.SilentBackgroundRequest=r(n.SilentBackgroundRequest),e.SilentBackgroundRequestOref=r(n.SilentBackgroundRequestOref),e.WebRequest=r(n.WebRequest),e.WebRequestOref=r(n.WebRequestOref),e.FormWebRequest=r(n.FormWebRequest),e.WebProgressRequest=r(n.WebProgressRequest),e.ValidationSchemaRequest=r(n.ValidationSchemaRequest),e.SilentBackgroundBeaconRequest=r(n.SilentBackgroundBeaconRequest)}),define("modules/clean/analytics",["require","exports","tslib","jquery","modules/clean/ajax","modules/clean/viewer"],function(t,e,n,r,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){var e=i.get_viewer();return t?[t]:e.get_users().map(function(t){return t.id})};e.BrowseActionsContextMenuLogger={log:function(t,e){for(var n=0,r=0,i=t;r<i.length;r++){i[r].is_dir&&n++}var s=t.length-n;o.SilentBackgroundRequest({url:"/browse_actions_context_menu_logger",data:{file_count:s,folder_count:n,action:e}})}},e.ContentManagerActionsLogger={log:function(t,e){o.SilentBackgroundRequest({url:"/content_manager_actions_logger",data:{ns_id:t,action:e}})}},e.UXAnalyticsLogger={log:function(t,e){o.SilentBackgroundRequest({url:"/log/ux_analytics",data:{event_type:t,extra_params:JSON.stringify(e)}})}},e.ProEventsLogger={log:function(t,e){o.SilentBackgroundRequest({url:"/log/pro_events",data:{event:t,extra:JSON.stringify(e)}})}},e.FileViewLogger={start_time:0,start:function(t){e.FileViewLogger.start_time||(e.FileViewLogger.start_time=t||Date.now())},stop:function(t){e.FileViewLogger.start_time?t.extra.time_taken=Date.now()-e.FileViewLogger.start_time:t.extra.time_taken=0,e.FileViewLogger.log(t),e.FileViewLogger.start_time=0},log:function(t){o.SilentBackgroundRequest({url:"/log/file_view",data:{viewing_user_ids:JSON.stringify(s(t.user_id)),target:t.target,platform:t.platform,origin:t.origin||null,action:t.action||null,ns_id:t.ns_id,sjid:t.sjid,ns_path:t.ns_path,shared_link_url:t.shared_link_url||null,extra:JSON.stringify(t.extra)}})}},e.LinkfileActivityLogger={log:function(t,e,n,r,i,s){o.SilentBackgroundRequest({url:"/linkfile_activity_log",data:{event_name:t,file_ext:e,link_domain:n,success:r,source:i,extra:JSON.stringify(s)}})}},e.PreviewActivityLogger={start_times:{},start:function(t,n){e.PreviewActivityLogger.start_times[t]=n||Date.now()},stop:function(t,n){null!=e.PreviewActivityLogger.start_times[t]&&(n.total_time=Date.now()-e.PreviewActivityLogger.start_times[t],e.PreviewActivityLogger.log(t,n),delete e.PreviewActivityLogger.start_times[t])},log:function(t,e){o.SilentBackgroundRequest({url:"/preview_activity_log",data:{event_name:t,input_method:e.input_method,file_ext:e.file_ext,extra:e.extra}})}},e.MobileFilePreviewLogger={log:function(t,e,n,r,i,s){o.SilentBackgroundRequest({url:"/log/mobile_file_preview",data:{client_time:+new Date,event_name:t,file_viewer_session_id:e,file_preview_session_id:n,file_ns_id:r,file_sjid:i,extra:JSON.stringify(s)}})}},e.SearchClientActivityLogger={create_completion_log_dict:function(t,e,n,r,o,i,s,u){return null!=e&&(t.used_spellcorrect=e),null!=n&&(t.request_id=n),null!=r&&(t.latency=(new Date).getTime()-r),null!=o&&(t.query_string=o),null!=i&&(t.result_count=i),null!=s&&"200"!==s&&(t.failure_type=s),null!=u&&(t.search_session_id=u),t},log:function(t,e,r){o.SilentBackgroundRequest({url:"/searchclientlogger",subject_user:e,data:n.__assign({event_name:t,typeahead_session_id:r.search_session_id},r)})}},e.SharedFolderActivityLogger={flow_id:null,log:function(t,n,r,i,s){if(s||null===e.SharedFolderActivityLogger.flow_id){var u=new Date,a=u.getTime().toString()+Math.random().toString();e.SharedFolderActivityLogger.flow_id=a.replace(".","")}o.SilentBackgroundRequest({url:"/sflogger",data:{platform:t,event_name:n,extra:JSON.stringify(i),active_uid:null!=r?r.id:null,flow_id:e.SharedFolderActivityLogger.flow_id}})}},e.ShareTibEventLogger={log:function(t,e,n,r){o.SilentBackgroundRequest({url:"/share_tib_log",data:{event:e,origin:n,extra:JSON.stringify(r)},subject_user:t})},log_unauth:function(t,e,n){o.SilentBackgroundRequest({url:"/share_tib_log_unauth",data:{event:t,origin:e,extra:JSON.stringify(n)}})}},e.SharingExperimentsLogger={log:function(t,e,n){void 0===n&&(n={}),o.SilentBackgroundRequest({url:"/log/sharing_experiments",data:{action_type:e,action_extras:JSON.stringify(n)},subject_user:t})}},e.ShmodelUILogger={TARGET_ITEMS:{FOLDER_IS_SF:"folder-is-sf",FOLDER_CAN_SF:"folder-can-sf",FOLDER_NO_SF:"folder-no-sf",FILE:"file"},log:function(t,e,n){o.SilentBackgroundRequest({url:"/shmuilog",data:{evt:t,origin:e,target_item:n}})}},e.TeamsWebActionsLogger={LOG_CATEGORY:{PROMO_TEAMS:"promo_teams",TEAM_INFO:"team_info",UPGRADE:"upgrade_to_dfb",USAGE_INFO:"usage_info",LIMITED_TEAM_INFO_DETAILED:"limited_team_info_detailed",TEAM_AND_USER_INFO:"team_and_user_info"},log:function(t,e,n,r,i,u){var a=s(r);o.SilentBackgroundRequest({url:"/teamswalogger",data:{event_name:t,extra:JSON.stringify(e),for_uids:JSON.stringify(a),log_category:u,restricted:i?"1":void 0},success:n?n:void 0,error:n?n:void 0})},log_for_category:function(t,n,r){e.TeamsWebActionsLogger.log(t,r,void 0,void 0,!1,n)},registerToLogClickEvent:function(t,n,o){r(t).click(function(){e.TeamsWebActionsLogger.log(n,void 0,void 0,void 0,!1,o)})}},e.UserActivityLogger={start_times:{},start:function(t,n,r){e.UserActivityLogger.start_times[n]=r||Date.now()},stop:function(t,n,r,o){null!=e.UserActivityLogger.start_times[n]&&(r.total_time=Date.now()-e.UserActivityLogger.start_times[n],e.UserActivityLogger.log(t,n,r,o),delete e.UserActivityLogger.start_times[n])},log:function(t,e,n,r){n=n||{};var i=s(r);o.SilentBackgroundRequest({url:"/ualogger",data:{platform:t,event_name:e,extra:JSON.stringify(n),for_uids:JSON.stringify(i)}})}},e.ViralLogger={log:function(t,e,n,r){o.SilentBackgroundRequest({url:"/virallogger",data:{user_ids:JSON.stringify(t),viral_type:e,action:n,extra:JSON.stringify(r||{})}})}},e.WebMiscActivityLogger={log:function(t,e,n){var r=s(n);o.SilentBackgroundRequest({url:"/misclogger",data:{event_name:t,extra:JSON.stringify(e),for_uids:JSON.stringify(r)}})}},e.SupportExperimentsWebLogger={_log:function(t,e){o.SilentBackgroundRequest({url:"/support_experiments_log",data:{event_name:t,extra:JSON.stringify(e)}})},log_file_restore:function(t){e.SupportExperimentsWebLogger._log("file_restore",{ref:t})}};var u=(function(){function t(t,e){void 0===t&&(t=null),this.context=t,this.search_mode=e,this._clear_buffers()}return t.prototype._clear_buffers=function(){this.selection_buffer=[],this.timing_buffer=[],this.total_searches=0,this.slow_searches=0,this.downloaded_contacts=null,this.downloading_time=null},t.prototype.add_record=function(t){t.deleted=!1,this.selection_buffer.push(t)},t.prototype.flag_record_as_removed=function(t){for(var e=0,n=this.selection_buffer;e<n.length;e++){var r=n[e];if(r.contact_id===t&&!r.deleted)return void(r.deleted=!0)}},t.prototype.add_timing_record=function(t){this.timing_buffer.push(t)},t.prototype.count_search=function(t){this.total_searches+=1,t&&(this.slow_searches+=1)},t.prototype.add_downloading_stats=function(t){t&&(this.downloading_time=t.downloading_time,this.downloaded_contacts=t.num_contacts)},t.prototype.log_records=function(t,e,n){void 0===n&&(n=0);var r={events:JSON.stringify(this.selection_buffer),canceled:e};if(this.total_searches||this.timing_buffer.length){var i={context:this.context,search_mode:this.search_mode,total_searches:this.total_searches,slow_searches:this.slow_searches,downloading_time:this.downloading_time,downloaded_contacts:this.downloaded_contacts};r.total_contacts=n,r.timing_events=JSON.stringify(this.timing_buffer),r.session_summary=JSON.stringify(i)}o.SilentBackgroundRequest({url:"/contact_search_log",subject_user:t,data:r}),this._clear_buffers()},t})();e.ContactSearchLogger=u,e.CommentsVortexLogger={log:function(t){o.SilentBackgroundRequest({url:"/comments_vortex_log",data:{event_name:t}})}},e.LegacySharingVortexLogger={log:function(t){o.SilentBackgroundRequest({url:"/legacy_sharing_vortex_log",data:{event_name:t}})}}}),define("modules/clean/css",["require","exports","modules/clean/static_urls","modules/core/exception","modules/core/uri"],function(t,e,n,r,o){"use strict";function i(){for(var t=document.querySelectorAll('link[rel="stylesheet"]'),e=0;e<t.length;e++){var n=t[e],r=o.parse(n.href).getPath();l[r]=Promise.resolve(),d[r]=!0}}function s(t){return'url("'+String(t).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'")'}function u(t,e,o){r.assert(t.startsWith("/static/css/"),"invalid static css path: "+t);var i=l[t];return i||(i=new Promise(function(e,r){var o=document.createElement("link");return o.href=n.static_url(t),o.rel="stylesheet",o.type="text/css",o.crossorigin="anonymous",o.onload=function(){return d[t]=!0,e()},o.onerror=r,document.head.appendChild(o)}),l[t]=i),i.then(e,o)}function a(t,e,n){var r=t.map(function(t){return u(t)});return Promise.all(r).then(e,n)}function c(t){return!!t.every(function(t){return r.assert(t.startsWith("/static/css/"),"invalid static css path: "+t),!!d[t]})||(i(),t.every(function(t){return!!d[t]}))}Object.defineProperty(e,"__esModule",{value:!0});var l=Object.create(null),d=Object.create(null);i(),e.css_url=s,e.require_css=u,e.require_css_multi=a,e.is_loaded=c}),function(){define("modules/clean/dbmodal_stack",["jquery"],function(t){var e;return e=(function(){function e(){}return e.__stack=[],e.CLEAR="dbmodal:clear",e.pop=function(n){var r;return null==n&&(n=null),null!=n?e.remove(n):n=e.__stack.pop(),null!=n&&n._hide(),r=e.top(),null!=r?r._show():t(document).trigger(e.CLEAR)},e.push=function(t){var n;return e.remove(t),n=e.top(),(null!=n?n.visible:void 0)&&n._hide(),e.__stack.push(t),t._show()},e.top=function(){var t;return t=e.__stack.length,t?e.__stack[t-1]:null},e.remove=function(t){var n,r,o,i,s;for(i=[],s=e.__stack,n=0,r=s.length;n<r;n++)o=s[n],o!==t&&i.push(o);e.__stack=i},e.clear=function(){var n,r,o;for(n=r=e.__stack.length-1;r>=0;n=r+=-1)o=e.__stack[n],o.visible&&o._hide();return t(document).trigger(e.CLEAR),e.__stack=[]},e.register=function(n,r){return t(document).on(n,r),t(document).on(e.CLEAR,function(){return t(document).off(n,r)})},e.unregister=function(e,n){return t(document).off(e,n)},e.trigger=function(e,n){return t(document).trigger(e,n)},e})(),{DBModalStack:e}})}.call(this),define("modules/clean/devtools/perf_hub_action_types",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActionTypes={PROFILED_AJAX_LOAD_FINISHED:"PROFILED_AJAX_LOAD_FINISHED",WEB_TIMING_FETCHED:"WEB_TIMING_FETCHED"}}),define("modules/clean/devtools/perf_hub_actions",["require","exports","modules/clean/devtools/perf_hub_action_types","modules/clean/flux/dispatcher"],function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(function(){function t(){}return t.prototype.add_ajax_profile=function(t,e){return r.dispatch({type:n.ActionTypes.PROFILED_AJAX_LOAD_FINISHED,data:{xhr:t,url:e}})},t.prototype.add_web_timing_details=function(t){return r.dispatch({type:n.ActionTypes.WEB_TIMING_FETCHED,data:t})},t})();e.PerfHubActions=new o}),function(){define("modules/clean/em_string",[],function(){return(function(){function t(e){if(!(this instanceof t))return new t(e);this.s=e,this.info=this.widthInfo(),this.length=e.length?this.info[this.s.length-1]:0}return t.em_snippet=function(e,n,r){return null==n&&(n=50),null==r&&(r=.75),new t(e.toString()).snippet(n,r).toString()},t.prototype.widthInfo=function(){var t,e,n,r;for(n={},n[-1]=0,t=e=0,r=this.s.length;0<=r?e<r:e>r;t=0<=r?++e:--e)n[t]=n[t-1]+this.ems(this.s.charAt(t));return n},t.prototype.findSpot=function(t){var e,n,r,o;if(!t)return 0;for(o=0,n=this.s.length;o<=n;)if(r=Math.floor(o/2+n/2),e=this.info[r-1],e>t)n=r-1;else{if(!(e<t))return r;o=r+1}return o>r?o:r},t.prototype.ems=function(e){var n,r,o,i,s;return r=.65,n=1.08,o=.58,i=e.charCodeAt(0),s=t.CODEPOINT_TO_WIDTH[i],s?s/Math.pow(10,t.ACCURACY):768<=i&&i<=879?0:65377<=i&&i<=65500?o:11904<=i&&i<=40911||44032<=i&&i<=55215||4352<=i&&i<=4607||63744<=i&&i<=64255||65280<=i&&i<=65535||131072<=i&&i<=196607?n:r},t.prototype.substr=function(e,n){var r,o;return o=this.findSpot(e),null!=n?(r=this.findSpot(e+n),new t(this.s.substr(o,r-o))):new t(this.s.substr(o))},t.prototype.toString=function(){return this.s},t.prototype.snippet=function(e,n){var r,o,i,s,u;return null==e&&(e=50),null==n&&(n=.75),this.length<=e?this:(e-=t._ELLIPSIS_LENGTH,r=e*n,s=e-r,u=this.length-s,i=this.substr(0,r),o=this.substr(u),new t(i.toString()+"…"+o.toString()))},t.ACCURACY=2,t.CODEPOINT_TO_WIDTH={32:38,33:25,34:42,35:67,36:58,37:92,38:75,39:25,40:33,41:33,42:58,43:58,44:25,45:33,46:25,47:42,48:58,49:58,50:58,51:58,52:58,53:58,54:58,55:58,56:58,57:58,58:25,59:25,60:58,61:58,62:58,63:50,64:100,65:67,66:67,67:67,68:75,69:58,70:58,71:75,72:83,73:33,74:25,75:67,76:58,77:100,78:83,79:83,80:67,81:83,82:67,83:58,84:58,85:75,86:67,87:100,88:67,89:58,90:58,91:33,92:42,93:33,94:58,95:50,96:67,97:58,98:67,99:50,100:67,101:58,102:33,103:58,104:67,105:25,106:25,107:58,108:25,109:100,110:67,111:67,112:67,113:67,114:42,115:50,116:42,117:67,118:58,119:83,120:58,121:58,122:50,123:42,124:58,125:42,126:58,161:25,162:58,163:58,164:58,165:58,166:58,167:58,168:67,169:92,170:42,171:50,172:58,174:92,175:58,176:50,177:58,178:42,179:42,180:67,181:67,182:75,183:25,184:25,185:42,186:42,187:50,188:83,189:83,190:83,191:50,192:67,193:67,194:67,195:67,196:67,197:67,198:92,199:67,200:58,201:58,202:58,203:58,204:33,205:33,206:33,207:33,208:75,209:83,210:83,211:83,212:83,213:83,214:83,215:58,216:83,217:75,218:75,219:75,220:75,221:58,222:67,223:67,224:58,225:58,226:58,227:58,228:58,229:58,230:92,231:50,232:58,233:58,234:58,235:58,236:25,237:25,238:25,239:25,240:67,241:67,242:67,243:67,244:67,245:67,246:67,247:58,
248:67,249:67,250:67,251:67,252:67,253:58,254:67,255:58,256:75,257:67,258:75,259:67,260:75,261:67,262:75,263:58,264:75,265:58,266:75,267:58,268:75,269:58,270:83,271:83,272:83,273:75,274:67,275:67,276:67,277:67,278:67,279:67,280:67,281:67,282:67,283:67,284:83,285:75,286:83,287:75,288:83,289:75,290:83,291:75,292:83,293:75,294:92,295:75,296:33,297:33,298:33,299:33,300:33,301:33,302:33,303:33,304:33,305:25,306:67,307:67,308:42,309:33,310:75,311:67,312:67,313:58,314:33,315:58,316:33,317:58,318:42,319:58,320:50,321:67,322:42,323:83,324:75,325:83,326:75,327:83,328:75,329:83,330:83,331:75,332:92,333:67,334:92,335:67,336:92,337:67,338:100,339:100,340:75,341:50,342:75,343:50,344:75,345:50,346:67,347:58,348:67,349:58,350:67,351:58,352:67,353:58,354:75,355:42,356:75,357:42,358:75,359:42,360:83,361:75,362:83,363:75,364:83,365:75,366:83,367:75,368:83,369:75,370:83,371:75,372:100,373:92,374:75,375:58,376:75,377:67,378:67,379:67,380:67,381:67,382:67,383:42,384:75,385:83,386:67,387:75,388:75,389:67,390:75,391:83,392:58,393:83,394:100,395:67,396:75,397:67,398:67,399:75,400:58,401:58,402:75,403:83,404:75,405:100,406:50,407:50,408:75,409:67,410:50,411:67,412:117,413:83,414:75,415:92,416:92,417:75,418:117,419:100,420:75,421:75,422:75,423:67,424:58,425:67,426:58,427:42,428:75,429:42,430:75,431:83,432:75,433:92,434:83,435:75,436:75,437:67,438:67,439:67,440:67,441:58,442:58,443:75,444:75,445:58,446:50,447:67,448:33,449:50,450:50,451:33,452:142,453:142,454:133,455:100,456:92,457:67,458:117,459:117,460:100,461:75,462:67,463:33,464:33,465:92,466:67,467:83,468:75,469:83,470:75,471:83,472:75,473:83,474:75,475:83,476:75,477:67,478:75,479:67,480:75,481:67,482:100,483:100,484:92,485:75,486:83,487:75,488:75,489:67,490:92,491:67,492:92,493:67,494:67,495:58,496:33,497:142,498:142,499:133,500:83,501:75,502:117,503:67,504:83,505:75,506:75,507:67,508:100,509:100,510:92,511:67,512:75,513:67,514:75,515:67,516:67,517:67,518:67,519:67,520:33,521:33,522:33,523:33,524:92,525:67,526:92,527:67,528:75,529:50,530:75,531:50,532:83,533:75,534:83,535:75,536:67,537:58,538:75,539:42,540:58,541:58,542:83,543:75,544:83,545:100,546:92,547:67,548:67,549:67,550:75,551:67,552:67,553:67,554:92,555:67,556:92,557:67,558:92,559:67,560:92,561:67,562:75,563:58,564:67,565:100,566:67,567:33,568:100,569:100,570:75,571:75,572:58,573:58,574:67,575:58,576:58,577:67,578:50,579:75,580:75,581:75,582:75,583:58,584:58,585:25,586:83,587:58,588:75,589:33,590:75,591:58,880:67,881:50,882:67,883:50,884:33,885:33,886:75,887:67,888:108,889:108,890:67,891:58,892:58,893:58,894:42,895:108,896:108,897:108,898:108,899:108,900:67,901:67,902:75,903:42,904:83,905:100,906:58,907:108,908:100,909:108,910:100,911:100,912:42,913:75,914:67,915:58,916:83,917:67,918:67,919:83,920:92,921:33,922:75,923:75,924:100,925:83,926:75,927:92,928:83,929:67,930:108,931:67,932:75,933:75,934:83,935:75,936:83,937:92,938:33,939:75,940:83,941:58,942:75,943:42,944:67,945:83,946:67,947:67,948:67,949:58,950:75,951:75,952:67,953:42,954:67,955:67,956:75,957:67,958:67,959:67,960:92,961:67,962:67,963:75,964:67,965:67,966:92,967:67,968:92,969:100,970:42,971:67,972:67,973:67,974:100,975:108,976:58,977:75,978:75,979:100,980:75,981:92,982:100,983:67,984:92,985:67,986:75,987:58,988:58,989:58,990:67,991:58,992:75,993:92,994:100,995:92,996:75,997:58,998:75,999:58,1e3:75,1001:75,1002:67,1003:67,1004:83,1005:58,1006:50,1007:42,1008:67,1009:67,1010:58,1011:33,1012:92,1013:58,1014:58,1015:67,1016:67,1017:75,1018:100,1019:83,1020:58,1021:75,1022:75,1023:75,1024:67,1025:67,1026:92,1027:58,1028:75,1029:67,1030:33,1031:33,1032:42,1033:108,1034:108,1035:83,1036:75,1037:83,1038:75,1039:83,1040:75,1041:67,1042:67,1043:58,1044:83,1045:67,1046:92,1047:67,1048:83,1049:83,1050:75,1051:83,1052:100,1053:83,1054:92,1055:83,1056:67,1057:75,1058:75,1059:75,1060:83,1061:75,1062:83,1063:75,1064:108,1065:108,1066:75,1067:92,1068:67,1069:75,1070:108,1071:75,1072:67,1073:67,1074:58,1075:58,1076:75,1077:67,1078:83,1079:58,1080:75,1081:75,1082:67,1083:67,1084:83,1085:75,1086:67,1087:75,1088:75,1089:58,1090:58,1091:58,1092:92,1093:67,1094:75,1095:58,1096:92,1097:100,1098:67,1099:83,1100:58,1101:58,1102:92,1103:58,1104:67,1105:67,1106:75,1107:58,1108:58,1109:58,1110:33,1111:33,1112:42,1113:92,1114:92,1115:75,1116:67,1117:75,1118:58,1119:75,1120:100,1121:75,1122:75,1123:67,1124:83,1125:83,1126:75,1127:67,1128:100,1129:92,1130:92,1131:83,1132:117,1133:108,1134:67,1135:67,1136:83,1137:83,1138:92,1139:67,1140:83,1141:67,1142:83,1143:67,1144:133,1145:125,1146:92,1147:67,1148:100,1149:75,1150:100,1151:75,1152:75,1153:58,1154:75,1155:0,1156:0,1157:0,1158:0,1159:108,1160:0,1161:0,1162:83,1163:75,1164:67,1165:58,1166:67,1167:75,1168:58,1169:58,1170:67,1171:58,1172:75,1173:67,1174:100,1175:92,1176:67,1177:58,1178:75,1179:67,1180:83,1181:75,1182:75,1183:67,1184:83,1185:75,1186:83,1187:75,1188:100,1189:83,1190:117,1191:100,1192:92,1193:75,1194:75,1195:58,1196:75,1197:58,1198:75,1199:58,1200:75,1201:58,1202:75,1203:75,1204:100,1205:83,1206:75,1207:67,1208:75,1209:67,1210:75,1211:58,1212:92,1213:75,1214:92,1215:75,1216:33,1217:92,1218:83,1219:75,1220:67,1221:83,1222:67,1223:83,1224:75,1225:83,1226:75,1227:75,1228:58,1229:100,1230:83,1231:25,1232:75,1233:67,1234:75,1235:67,1236:100,1237:100,1238:67,1239:67,1240:75,1241:67,1242:75,1243:67,1244:92,1245:83,1246:67,1247:58,1248:67,1249:58,1250:83,1251:75,1252:83,1253:75,1254:92,1255:67,1256:92,1257:67,1258:92,1259:67,1260:75,1261:58,1262:75,1263:58,1264:75,1265:58,1266:75,1267:58,1268:75,1269:58,1270:58,1271:42,1272:92,1273:83,1274:58,1275:42,1276:75,1277:58,1278:75,1279:58,2026:67,19977:108,65403:58},t._ELLIPSIS_LENGTH=new t("…").length,t})()})}.call(this),define("modules/clean/event_handler",["require","exports","jquery"],function(t,e,n){"use strict";function r(t){var n=t.prototype.componentWillMount,r=t.prototype.componentWillUnmount;t.prototype.componentWillMount=function(){e.EventHandlerMixin.componentWillMount.apply(this),n&&"function"==typeof n&&n.apply(this)},t.prototype.componentWillUnmount=function(){r&&"function"==typeof r&&r.apply(this),e.EventHandlerMixin.componentWillUnmount.apply(this)}}Object.defineProperty(e,"__esModule",{value:!0}),e.eventHandler=r,e.EventHandlerMixin={componentWillMount:function(){this.events=new o},componentWillUnmount:function(){this.events.removeAll()}};var o=(function(){function t(){}return t.prototype.on=function(t,e,r,o,i){"string"!=typeof r&&(i=o,o=r,r=void 0),i&&(o=n.proxy(o,i)),this.handlers||(this.handlers=[]),t=n(t),r?t.on(e,r,o):t.on(e,o),this.handlers.push({element:t,event:e,selector:r,callback:o})},t.prototype.removeAll=function(){this.handlers&&(this.handlers.forEach(function(t){t.selector?t.element.off(t.event,t.selector,t.callback):t.element.off(t.event,t.callback)}),this.handlers=null)},t})();e.EventHandler=o}),function(){define("modules/clean/event_load",[],function(){var t,e;return t=function(t){return window.setTimeout(function(){return t.apply(t)},0)},e=function(e){return"complete"===document.readyState?t(e):null!=window.attachEvent?window.attachEvent("onload",e):null!=window.addEventListener?window.addEventListener("load",e,!1):void 0},{window_load:e}})}.call(this),define("modules/clean/filepath",["require","exports"],function(t,e){"use strict";function n(t){return t?("/"!==t.charAt(0)&&(t="/"+t),"/"===t.charAt(t.length-1)?t.substr(0,t.length-1):t):""}function r(t,e){return n(t).toLowerCase()===n(e).toLowerCase()}function o(t){if(!t.length)return!1;var e=c(t[0]);return!t.find(function(t){return c(t)!==e})}function i(t,e){t=n(t);var r=t.split("/"),o=r.pop();return o?o:e||"Dropbox"}function s(t){return t.indexOf(".")===-1?t:t.split(".").slice(0,-1).join(".")}function u(t){var e=t.split("."),n=t.length>0&&"."===t[0],r=t.indexOf(".")<0;n&&(r=e.length<=2);var o=e.pop();return o&&!r?o.toLowerCase():""}function a(t){return t.indexOf(".")===-1?"":u(t).toLowerCase()}function c(t){return t.split("/").slice(0,-1).join("/")||"/"}Object.defineProperty(e,"__esModule",{value:!0}),e.normalize=n,e.paths_are_equal=r,e.inSameDirectory=o,e.filename=i,e.filename_without_extension=s,e.file_extension=u,e.file_extension_for_logging=a,e.parent_dir=c}),function(){"use strict";var t=function(t,n){function r(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("modules/clean/flux/dispatcher",["external/flux","modules/core/exception"],function(e,n){var r;return r=!1,new((function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.dispatch=function(t){var e;n.assert(!r,"Invariant error: cannot dispatch during dispatch."),n.assert(null!=t.type,"Invariant error: cannot dispatch action without 'type' property."),r=!0;try{"function"==typeof this.dispatch_begin&&this.dispatch_begin();try{return o.__super__.dispatch.call(this,{action:t})}catch(t){return e=t,n.reportException({err:e}),console.error(e)}finally{"function"==typeof this.dispatch_end&&this.dispatch_end()}}finally{r=!1}},o})(e.Dispatcher))})}.call(this),function(){define("modules/clean/fuzzy",[],function(){var t;return t={simpleFilter:function(e,n){return n.filter(function(n){return t.test(e,n)})},test:function(e,n){return null!==t.match(e,n)},match:function(t,e,n){var r,o,i,s,u,a,c,l,d,_,p,h,f;for(n=n||{},l=0,h=[],c=e.length,f=0,u=0,_=n.pre||"",d=n.post||"",o=n.caseSensitive&&e||e.toLowerCase(),r=void 0,void 0,t=n.caseSensitive&&t||t.toLowerCase(),a=0,p=[],i=0,s=0;a<c;)r=e[a],o[a]===t[l]?(r=_+r+d,s?s+=1:(i=a,s=1),l+=1,u+=1+u):(u=0,s&&(p.push([i,s]),s=0)),f+=u,h[h.length]=r,a++;return s&&p.push([i,s]),l===t.length?{highlighted:p,rendered:h.join(""),score:f}:null},filter:function(t,e,n){var r,o;return null==n&&(n={}),o=[],r=this._reduce.bind(this,t,n),e.reduce(r,o).sort(this._sort)},_reduce:function(e,n,r,o,i){var s,u;return u=o,n.extract&&(u=n.extract(o)),s=t.match(e,u,n),null!=s&&r.push({string:s.rendered,score:s.score,index:i,original:o}),r},_sort:function(t,e){var n;return n=e.score-t.score,n?n:t.index-e.index}}})}.call(this),function(){define("modules/clean/job_progress",["jquery","modules/core/dom","modules/clean/dbmodal_stack"],function(t,e,n){var r,o,i,s;return r=n.DBModalStack,s={make:function(e,n){var r,o,i,s,u,a,c;return null==n&&(n=300),c=n.toString()+"px",i=t("<div />",{class:"outer-progress-bar"}).css({width:c}),r=t("<div />",{class:"inner-progress-bar",id:"pb_"+e}).css({width:c}),u=t("<div />",{class:"under-pb progress-bar"}).css({width:c}),s=t("<div />",{class:"over-pb progress-bar",id:"pb_"+e+"_over"}).css({display:"none"}),a=t("<div />",{class:"pb-percentage",id:"pb_"+e+"_upct"}).css({width:c}),o=t("<div />",{class:"pb-percentage",id:"pb_"+e+"_opct"}).css({width:c}),u.append(a),s.append(o),r.append(u),r.append(s),i.append(r),s.data("progress-width",n),i},set:function(e,n){var r,o,i,s;if(r=t("#pb_"+e+"_over"))return o=n.split("/").map(Number),n=o.length>1?o[0]/o[1]:o[0],n=isNaN(n)?0:n,i=100*Math.min(n,1),s=String(i)+"%",r.show(),r.css({backgroundColor:"#348DD3",overflow:"hidden",width:s})}},o={complete:{},handled:function(t){var e;return!!t&&(e=!!o.complete[t],o.complete[t]=!0,e)},peek:function(t){return!!t&&!!o.complete[t]}},i={show:function(n){var o,i,u,a,c,l,d;if(n&&(null!=(d=r.top())&&d.hide(),o=t("body"),i=t("<div />",{id:"modal-progress-overlay"}),i.hide(),i.appendTo(o),t("#browse-box").length?e.clone_position(i,t("#browse-box")):t("#gallery-view-media").length?e.clone_position(i,t("#gallery-view-media")):i.css({position:"fixed",width:"100%",height:"100%"}),i.width()))return c=t("<div />",{id:"modal-progress-content"}),a=t("<div />",{id:"modal-progress-container"}),u=t("<div />",{id:"modal-progress-bar",opacity:1,html:s.make("modal-progress",150,"")}),l=t("<div />",{id:"modal-progress-text",text:n}),c.hide(),a.append(u,l),c.append(a),o.append(c),i.fadeTo(250,.7),c.fadeIn(250)},update:function(t){var e;if(e="progress",!(t.indexOf(e)>-1&&(t=t.substring(e.length),isNaN(t))))return s.set("modal-progress",t)},hide:function(){return t("#modal-progress-overlay").fadeOut(250,function(){return t("#modal-progress-overlay").remove()}),t("#modal-progress-content").fadeOut(250,function(){return t("#modal-progress-content").remove()})}},{ModalProgress:i,Job:o}})}.call(this),function(){define("modules/clean/js_environment",[],function(){return{isBrowser:function(){return"undefined"!=typeof window&&null!==window},isTest:function(){return"undefined"!=typeof jasmine&&null!==jasmine}}})}.call(this),define("modules/clean/keycode",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});(function(t){t[t.A=65]="A",t[t.BACKSPACE=8]="BACKSPACE",t[t.TAB=9]="TAB",t[t.ENTER=13]="ENTER",t[t.SHIFT=16]="SHIFT",t[t.CONTROL=17]="CONTROL",t[t.ALT=18]="ALT",t[t.ESC=27]="ESC",t[t.SPACE=32]="SPACE",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN",t[t.INSERT=45]="INSERT",t[t.DELETE=46]="DELETE",t[t.TWO_KEY=50]="TWO_KEY",t[t.EQUALS=61]="EQUALS",t[t.COMMAND=91]="COMMAND",t[t.PLUS_EQUALS_FF=107]="PLUS_EQUALS_FF",t[t.MINUS_FF=109]="MINUS_FF",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.PLUS_EQUALS_FF_GERMAN=171]="PLUS_EQUALS_FF_GERMAN",t[t.MINUS_FF_MAC=173]="MINUS_FF_MAC",t[t.PLUS_CHROME=187]="PLUS_CHROME",t[t.MINUS_CHROME=189]="MINUS_CHROME",t[t.FORWARD_SLASH=191]="FORWARD_SLASH",t[t.AT_SIGN=64]="AT_SIGN",t[t.PROCESSING=229]="PROCESSING"})(e.KeyCode||(e.KeyCode={}))}),function(){define("modules/clean/react/tooltip",["external/react","external/react-dom","external/underscore","jquery"],function(t,e,n,r){var o,i,s,u,a,c,l,d,_,p,h;return l={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3,BOTTOM_RIGHT:4},p=t.DOM,s="tooltip-holder",o=7,u=1e4,i="data-event-id",_=function(){var t,e;return t=s,e=r("#"+t),e.length||(e=r("<div />").attr({id:t,style:"z-index: "+u}).prependTo("body")),e[0]},d=function(t){var e,n,r;return n=t.offset(),r=t.outerWidth(),e=t.outerHeight(),{left_x:n.left,right_x:n.left+r,top_y:n.top,bottom_y:n.top+e,width:r,height:e}},c=t.createClass({displayName:"TooltipBubble",propTypes:{position:t.PropTypes.oneOf((function(){var t;t=[];for(h in l)t.push(l[h]);return t})()),contents:t.PropTypes.oneOfType([t.PropTypes.element,t.PropTypes.string]),className:t.PropTypes.string,mouse_move_cb:t.PropTypes.func,mouse_out_cb:t.PropTypes.func,targetElementDimensions:t.PropTypes.shape({left_x:t.PropTypes.number,right_x:t.PropTypes.number,top_y:t.PropTypes.number,bottom_y:t.PropTypes.number,width:t.PropTypes.number,height:t.PropTypes.number})},render:function(){var t,e,n,i,s;return e=this.props.targetElementDimensions,n=r(window),s=r(window).scrollTop(),i=r(window).scrollLeft(),t=function(){switch(this.props.position){case l.TOP:return{bottom:n.height()-e.top_y+o+s};case l.BOTTOM:return{top:e.bottom_y+o-s};case l.LEFT:return{right:n.width()-e.left_x+o+i};case l.RIGHT:return{left:e.right_x+o-i};case l.BOTTOM_RIGHT:return{left:e.right_x-o-i,top:e.bottom_y+o-s}}}.call(this),p.div({className:"tooltip-bubble "+(this.props.className||""),ref:"tooltip",style:t,onMouseMove:this.props.mouse_move_cb?this.props.mouse_move_cb:void 0,onMouseLeave:this.props.mouse_out_cb?this.props.mouse_out_cb:void 0},p.div({className:"tooltip-inner"},this.props.contents))},componentDidMount:function(){return this._centerAndShow()},componentDidUpdate:function(){return this._centerAndShow()},_centerAndShow:function(){var t,n,i,s,u,a,c,_,p,h,f;return t=r(e.findDOMNode(this.refs.tooltip)),c=this.props.targetElementDimensions,_=d(t),a=r(window).scrollTop(),u=r(window).scrollLeft(),(i=this.props.position)===l.TOP||i===l.BOTTOM?(f=r(window).width(),n=c.left_x+c.width/2-_.width/2-u,n<0?n=0:n+_.width>f&&(n=f-_.width-o),t.css("left",n+"px")):(s=this.props.position)!==l.LEFT&&s!==l.RIGHT||(h=r(window).height(),p=c.top_y+c.height/2-_.height/2-a,p<0?p=0:p+_.height>h&&(p=h-_.height-o),t.css("top",p+"px")),t.show()}}),a=t.createClass({displayName:"Tooltip",propTypes:{position:t.PropTypes.oneOf((function(){var t;t=[];for(h in l)t.push(l[h]);return t})()),tooltip_contents:t.PropTypes.oneOfType([t.PropTypes.element,t.PropTypes.string]),tooltip_classname:t.PropTypes.string,hide_delay:t.PropTypes.number,interaction_enabled:t.PropTypes.bool,is_focusable:t.PropTypes.bool},render:function(){return p.div({className:"tooltip-target",onMouseMove:(function(t){return function(e){return t._show(e)}})(this),onFocus:(function(t){return function(e){return t._show(e)}})(this),onMouseLeave:this._on_mouse_leave(),onBlur:this._on_mouse_leave(),id:this.state.tooltip_id,ref:"tooltipTarget",tabIndex:this.props.is_focusable?0:void 0},this.props.children)},componentDidMount:function(){return r(document).bind("scroll."+this.state.event_id,(function(t){return function(e){return t._hide(e)}})(this))},componentDidUpdate:function(){if(this.state.visible)return this._render_tooltip()},componentWillUnmount:function(){var t;return r(document).unbind("scroll."+this.state.event_id),t=_(),e.unmountComponentAtNode(t)},_on_mouse_leave:function(t){return(function(t){return function(e){return t.props.hide_delay>0?t._scheduleHide(t.props.hide_delay):t._hide(e)}})(this)},_render_tooltip:function(){var n,o;return o=_(),r("#"+s).css("position","fixed"),r("#"+s).css("left","0"),r("#"+s).css("right","0"),this.props.hide_delay>0&&r("#"+s).attr(i,this.state.event_id),this.props.position===l.TOP?(r("#"+s).css("top","auto"),r("#"+s).css("bottom","0")):(r("#"+s).css("top","0"),r("#"+s).css("bottom","auto")),n=t.createElement(c,{position:this.props.position,contents:this.props.tooltip_contents,className:this.props.tooltip_classname,mouse_move_cb:this.props.interaction_enabled?this._clear_timeout:void 0,mouse_out_cb:this.props.interaction_enabled?this._on_mouse_leave():void 0,targetElementDimensions:d(r(e.findDOMNode(this.refs.tooltipTarget)))}),e.unmountComponentAtNode(o),e.render(n,o)},_show:function(){if(!this.state.visible||this._last_timeout)return this._render_tooltip(),this.setState({visible:!0}),this._clear_timeout()},_hide:function(){var t,n;if(this.state.visible)return n=_(),this._last_timeout?(t=r(n).attr(i),t===this.state.event_id&&(e.unmountComponentAtNode(n),this._clear_timeout())):e.unmountComponentAtNode(n),this.setState({visible:!1})},_scheduleHide:function(t){if(this.state.visible)return this._last_timeout=setTimeout(this._hide,t)},_clear_timeout:function(){if(this._last_timeout)return clearTimeout(this._last_timeout),this._last_timeout=null},getInitialState:function(){return{visible:!1,event_id:n.uniqueId()}},getDefaultProps:function(){return{interaction_enabled:!1,hide_delay:0}}}),{Tooltip:a,TooltipPosition:l}})}.call(this),function(){define("modules/clean/referrer_cleansing_redirect",["external/sjcl","modules/core/browser","modules/core/cookies","modules/core/uri"],function(t,e,n,r){var o,i,s;return s=function(e){var r,o,i;return r=t.codec.utf8String.toBits(n.read("__Host-js_csrf")),t.codec.utf8String.toBits(e),o=new t.misc.hmac(r),i=o.encrypt(e),t.codec.base64.fromBits(i)},o=function(t){var e,n;return e=r.parse(t).scheme,e&&"http"!==e&&"https"!==e?"#":(n=new r({scheme:"https",authority:"www.dropbox.com",path:"/referrer_cleansing_redirect"}),n.setQuery({url:t,hmac:s(t)}),n)},i=function(t){return e.redirect(o(t))},{get_redirect_uri:o,redirect:i}})}.call(this),define("modules/clean/static_urls",["require","exports","modules/constants/env","modules/core/exception","modules/core/uri"],function(t,e,n,r,o){"use strict";function i(t){r.assert(0===t.indexOf("/static/"),"#{path} is not a /static url");return new o({scheme:"https",authority:n.STATIC_CONTENT_HOST,path:t}).toString()}Object.defineProperty(e,"__esModule",{value:!0}),e.static_url=i}),define("modules/clean/storage",["require","exports"],function(t,e){"use strict";function n(t){try{var e="__storage_test__";return t.setItem(e,e),t.removeItem(e),t}catch(e){return t&&r(e)?t:new o}}function r(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)}Object.defineProperty(e,"__esModule",{value:!0});var o=(function(){function t(){this.storage={}}return t.prototype.clear=function(){this.storage={}},t.prototype.getItem=function(t){return this.storage[t]},t.prototype.key=function(t){return Object.keys(this.storage)[t]},t.prototype.removeItem=function(t){delete this.storage[t]},t.prototype.setItem=function(t,e){this.storage[t]=e},t})();e.MemoryStorage=o;var i=(function(){function t(t){this.initFn=t}return Object.defineProperty(t.prototype,"storage",{get:function(){return this.initFn&&(this._storage=this.initFn(),delete this.initFn),this._storage},enumerable:!0,configurable:!0}),t.prototype.get=function(t){if(this.storage){var e=this.storage.getItem(t);return e?JSON.parse(e):e}},t.prototype.set=function(t,e){if(this.storage)try{return null===e?this.delete(t):this.storage.setItem(t,JSON.stringify(e))}catch(t){if(r(t))return;throw t}},t.prototype.delete=function(t){return this.storage?this.storage.removeItem(t):void 0},t.prototype.reset=function(){return this.storage?this.storage.clear():void 0},t})();e.BrowserStorage=i;var s=window.sessionStorage?window.sessionStorage:new o;e.SessionStorage=new i(function(){return n(s)});var u=window.localStorage?window.localStorage:new o;e.LocalStorage=new i(function(){return n(u)})}),function(){define("modules/clean/stormcrow/stormcrow_panel_action_types",[],function(){var t;return t={},t.ActionTypes={STORMCROW_REQUEST_INFO_RETRIEVED:"STORMCROW_REQUEST_INFO_RETRIEVED"},t})}.call(this),function(){define("modules/clean/stormcrow/stormcrow_panel_actions",["modules/clean/flux/dispatcher","modules/clean/stormcrow/stormcrow_panel_action_types"],function(t,e){var n;return n=e.ActionTypes,new((function(){function e(){}return e.prototype.FEATURES_USED_URL="/stormcrow_features_used",e.prototype.add_request_info=function(e){return t.dispatch({type:n.STORMCROW_REQUEST_INFO_RETRIEVED,data:e})},e})())})}.call(this),define("modules/clean/undo",["require","exports","jquery","modules/constants/undo_strings","modules/core/notify"],function(t,e,n,r,o){"use strict";function i(){a&&(a(u),a=void 0,u=null)}function s(t,e,s,l,d){if(void 0===d&&(d=r.UNDO),!e||!Object.keys(e).length)return void o.success(t);u=e,a=s,l=null==l?30:l;var _=n("<span />");t.toHTML?_.html(t.toHTML()):_.text(t);var p=n('<button class="button-as-link"/>').text(d);p.on("click",function(t){t.preventDefault(),i(),o.clear()}),_.append("&nbsp;").append(p),c=o.success(_,l)}Object.defineProperty(e,"__esModule",{value:!0});var u,a,c;e.performUndo=i,e.notifyWithUndo=s}),define("modules/clean/user",["require","exports"],function(t,e){"use strict";return(function(){function t(t){Object.assign(this,t)}return t.prototype.toString=function(){return String(this.id)},t})()}),define("modules/clean/ux_analytics",["require","exports"],function(t,e){"use strict";function n(){return(new Date).getTime()}function r(){var t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}function o(t){return void 0===t&&(t=window),t.location.href}function i(t){return void 0===t&&(t=window),t.location.search}function s(t,e,r){void 0===r&&(r={});var o=null,i=0;return function(){var s=n();i||r.leading!==!1||(i=s);var u=e-(s.valueOf()-i.valueOf()),a=arguments;if(u<=0||u>e)o&&(clearTimeout(o),o=null),i=s,t.apply(null,a),a=null;else if(!o&&r.trailing!==!1){var c=function(){i=r.leading===!1?0:n(),o=null,t.apply(null,a),a=null};o=setTimeout(c,u)}}}function u(){var t={},e=i();if(e.length)for(var n=e.substring(1).replace(/&amp;/g,"&").split("&"),r=0,o=n;r<o.length;r++){var s=o[r],u=s.split("="),a=u[0],c=u[1];a&&c&&(a=a.trim(),c=c.trim(),a.length&&c.length&&(t[a]=decodeURIComponent(c.replace(/\+/g," "))))}return t}function a(t){return t&&"A"===t.nodeName}function c(t){return t&&t.getAttribute("data-trackingid")}function l(t){return t&&"BODY"===t.nodeName}function d(t){for(var e=t,n=0;n<6&&(!a(e)&&!c(e))&&!l(e);n++){var r=e.parentNode;if(!(r instanceof HTMLElement))break;e=r}return e}Object.defineProperty(e,"__esModule",{value:!0});var _,p=(function(){var t=null,e="uxa.onedoesnotsimplyusesessionstorage";try{t=window.sessionStorage,t&&(t.setItem(e,e),t.removeItem(e))}catch(e){t=null}return t})(),h=(function(){var t=window;return t.hasOwnProperty("JSON")?t.JSON:null})();(function(t){function e(t){return"uxa."+t}function n(){return!!u}function r(t){if(!u||!a)return null;try{var n=u.getItem(e(t));return null===n?null:a.parse(n)}catch(t){return null}}function o(t,n){if(!u||!a)return null;try{return null===n?i(t):(u.setItem(e(t),a.stringify(n)),null)}catch(t){return null}}function i(t){return u?(u.removeItem(e(t)),null):null}function s(t){return u?(u.clear(),null):null}var u=p,a=h;t.isEnabled=n,t.get=r,t.set=o,t.remove=i,t.clear=s})(_=e.UXStorage||(e.UXStorage={}));var f={heartbeat:"heartbeat",linkClick:"link_click",linkNoSessionStorage:"link_no_session_storage",modalClose:"modal_close",modalOpen:"modal_open",pageView:"page_view",scroll:"scroll_event"},g=Object.keys(f).map(function(t){return f[t]}),m={linkClick:"clicked_link",trackingParams:"tracking_params"},v=(function(){function t(t,e,o,i){void 0===i&&(i={});var s=this;this.currentModalId=null,this.lastScrollOffset=0,this.scrollTimer=null,this.startHeartbeat=function(){for(var t=0,e=[2,5,10,15,30];t<e.length;t++){var n=e[t];setTimeout(s.logOnPage.bind(s,f.heartbeat),1e3*n)}for(var r=0,o=[1,2,4,9];r<o.length;r++){var n=o[r];setTimeout(s.logOnPage.bind(s,f.heartbeat),60*n*1e3)}},this.delayedInit=function(){s.saveTrackingParams(),s.logPageView(),s.logDelayedClickEvent(),s.setupListeners()},this.trackScrolling=function(){s.scrollTimer&&clearTimeout(s.scrollTimer),s.scrollTimer=setTimeout(s.onScroll,500)},this.onScroll=function(){var t=r();s.lastScrollOffset!==t&&(s.lastScrollOffset=t,s.logOnPage(f.scroll,{vertical_offset:t}))},this.handleLinkClick=function(t){var e=d(t.target);if(a(e)||c(e)){var n=e.getBoundingClientRect(),o=s.createEvent(f.linkClick,{left:Math.round(n.left),link_id:e.getAttribute("data-trackingid"),link_rank:s.getLinkRank(e),origin_href:e.getAttribute("href"),time_on_page:s.getTimeOnPage(),top:Math.round(n.top),vertical_offset:r(),tag_name:e.tagName.toLowerCase()});s.delayedLinkClickLogging&&a(e)?s.storeDelayedLinkClick(o):s.logEvent(o)}},this.handleLinkKeyboardEnter=function(t){13===t.keyCode&&s.handleLinkClick(t)},this.trackModalShow=function(){var t=document.querySelector(s.modalClass);t&&(t.offsetWidth>0||t.offsetHeight>0)&&(s.currentModalId=t.id,s.logModal(f.modalOpen,s.currentModalId))},this.trackModalHide=function(){s.currentModalId&&(s.logModal(f.modalClose,s.currentModalId),s.currentModalId=null)},this.requestId=t,this.orgReferrer=e,this.logger=o,void 0!==i.delayed_link_click_logging?this.delayedLinkClickLogging=i.delayed_link_click_logging:this.delayedLinkClickLogging=!0,void 0!==i.modal_class?this.modalClass=i.modal_class:this.modalClass=".ui-modal",this.initTime=n(),this.startHeartbeat(),setTimeout(this.delayedInit,200)}return t.resetStorage=function(){for(var t=0,e=Object.keys(m);t<e.length;t++){var n=e[t];_.remove(m[n])}},t.prototype.setupListeners=function(){window.addEventListener("scroll",s(this.trackScrolling,2e3,{leading:!0})),document.body.addEventListener("mousedown",this.handleLinkClick),document.body.addEventListener("keydown",this.handleLinkKeyboardEnter),document.addEventListener("modalOpened",this.trackModalShow),document.addEventListener("modalClosed",this.trackModalHide)},t.prototype.logPageView=function(){this.logEvent(this.createEvent(f.pageView))},t.prototype.logModal=function(t,e){var n={modal:e};this.logOnPage(t,n)},t.prototype.logDelayedClickEvent=function(){if(!_.isEnabled())return null;var t=_.get(m.linkClick);if(t)try{t.destination_url=o();var e={eventName:f.linkClick,extra:t};this.logEvent(e),_.remove(m.linkClick)}catch(t){}return null},t.prototype.logOnPage=function(t,e){void 0===e&&(e={}),e.vertical_offset=e.vertical_offset||r(),e.time_on_page=e.time_on_page||this.getTimeOnPage(),this.getTimeOnPage()<600&&this.logEvent(this.createEvent(t,e))},t.prototype.logEvent=function(t){try{if(g.indexOf(t.eventName)===-1)throw new Error("UXAnalytics.log: trying to log an invalid event ("+t.eventName+")");this.logger.log(t.eventName,t.extra)}catch(t){throw t}},t.prototype.createEvent=function(t,e){if(void 0===e&&(e={}),this.orgReferrer&&(e.org_referrer=this.orgReferrer),e.request_id=e.request_id||this.requestId,e.url=e.url||o(),e.uxa_v=2.2,this.trackingParams)for(var n=0,r=Object.keys(this.trackingParams);n<r.length;n++){var i=r[n],s=i.replace(/^_/,""),u=this.trackingParams[i];e["param_"+s]=u}return{eventName:t,extra:e}},t.prototype.storeDelayedLinkClick=function(t){if(!_.isEnabled())return this.logOnPage(f.linkNoSessionStorage),!1;try{_.set(m.linkClick,t.extra)}catch(t){return!1}return!0},t.prototype.saveTrackingParams=function(){var t=this.getTrackingParams();Object.keys(t).length?(_.set(m.trackingParams,t),this.trackingParams=t):this.trackingParams=null},t.prototype.getTrackingParams=function(){for(var t=_.get(m.trackingParams)||{},e=["gclid","oqa","trigger","_tk","_camp","_ad","_net","_kw","utm_source","utm_medium"],n=u(),r=0,o=e;r<o.length;r++){var i=o[r];n.hasOwnProperty(i)&&(t[i]=n[i])}return t},t.prototype.getTimeOnPage=function(){return Math.round((n()-this.initTime)/1e3)},t.prototype.getLinkRank=function(t){var e=t.getAttribute("href"),n=document.querySelectorAll('a[href="'+e+'"]');if(1===n.length)return 1;for(var r=0;r<n.length;r++)if(n[r]===t)return r+1;return-1},t})();e.UXAnalytics=v}),define("modules/clean/viewer",["require","exports","tslib","modules/constants/viewer","modules/core/exception","modules/clean/user"],function(t,e,n,r,o,i){"use strict";var s=(function(){function t(t){void 0===t&&(t={}),this.replace_viewer_data(t)}return t.get_viewer=function(){return t._cached_viewer},t.get_role_title=function(t){return this.get_viewer().get_title_by_role(t.role)},t.get_root_name=function(t){return this.get_viewer().get_root_name_by_role(t.role)},t.get_is_signed_in=function(t){return t.is_signed_in},t.prototype.replace_viewer_data=function(t){void 0===t&&(t={}),this._authed_users={},this._all_users={};for(var e=t._user_data||[],n=0,r=e;n<r.length;n++){var o=r[n],s=new i(o);this._all_users[s.id]=s,o._authed&&(this._authed_users[s.id]=s)}this.display_name=t.display_name,this.team_id=t.team_id,this.team_dbtid=t.team_dbtid,this.team_name=t.team_name,this.team_is_limited=t.team_is_limited||!1,this.is_assume_user_session=t.is_assume_user_session||!1,this.is_team_assume_user_session=t.is_team_assume_user_session||!1,this.is_reseller_session=t.is_reseller_session||!1,this.can_moderate_comments=t.can_moderate_comments||!1,this.is_signed_in=e.length>0,this.is_paired=e.length>1,t.deprecated_first_user_in_the_cookie_id&&(this.deprecated_first_user_in_the_cookie=this.get_user_by_id(t.deprecated_first_user_in_the_cookie_id)),this._load_cached_users()},t.prototype.get_user_by_role=function(t,e){var n=this.get_uid_by_role(t);return null!=n?this.get_user_by_id(n,e):void 0},t.prototype.role_exists=function(t){return null!=this.get_uid_by_role(t)},t.prototype.get_user_by_id=function(t,e){o.assert(this.is_uid_associated(t),"User "+t+" is not associated with this viewer");var n=e?this._all_users:this._authed_users,r=n[t];return o.assert(!!r,"User "+t+" is not signed in"),r},t.prototype.is_role_signed_in=function(t){var e=this.get_uid_by_role(t);return null!=e&&e in this._authed_users},t.prototype.is_uid_signed_in=function(t){return t in this._authed_users},t.prototype.is_user_signed_in=function(t){return null!=t&&this.is_uid_signed_in(t.id)},t.prototype.is_uid_associated=function(t){return t in this._all_users},t.prototype.get_users=function(t){var e=t?this._all_users:this._authed_users,n=Object.keys(e).map(function(t){return e[t]});return n.sort(function(t,e){return"personal"===t.role?-1:1}),n},
t.prototype.get_user_ids=function(t){return this.get_users(t).map(function(t){return t.id})},t.prototype.get_roles=function(t){return this.get_users(t).map(function(t){return t.role})},t.prototype.get_account_ids=function(t){return this.get_users(t).map(function(t){return t.account_id})},t.prototype.get_email_by_role=function(t){var e=this.get_user_by_role(t,!0);return e&&e.email},t.prototype.get_uid_by_role=function(t){"photos"===t&&(t=this.is_paired||!this.is_signed_in?"personal":this._all_users[Object.keys(this._all_users)[0]].role);for(var e in this._all_users)if(this._all_users.hasOwnProperty(e)){var n=this._all_users[e];if(n.role===t)return n.id}},t.prototype.get_title_by_role=function(t){return this.is_paired?"personal"===t?r.PERSONAL_ROLE_STRING:this.team_name:""},t.prototype.get_root_name_by_role=function(t){return this.get_title_by_role(t)||r.DEFAULT_ROOT_NAME},t.prototype._sign_in_all_users=function(){this._authed_users=n.__assign({},this._all_users),this._load_cached_users()},t.prototype._sign_out_user_by_id=function(t){delete this._authed_users[t],this._load_cached_users()},t.prototype.sign_in_user_by_id=function(t){o.assert(this.is_uid_associated(t),"User "+t+" is not associated with this viewer"),this._authed_users[t]=this._all_users[t],this._load_cached_users()},t.prototype._load_cached_users=function(){this.personal_user=this._authed_users[this.get_uid_by_role("personal")],this.photos_user=this._authed_users[this.get_uid_by_role("photos")],this.work_user=this._authed_users[this.get_uid_by_role("work")],this.personal_email=this.get_email_by_role("personal"),this.work_email=this.get_email_by_role("work"),this.is_personal_user_signed_in=this.is_role_signed_in("personal"),this.is_photos_user_signed_in=this.is_role_signed_in("photos"),this.is_work_user_signed_in=this.is_role_signed_in("work")},t})();return s._cached_viewer=new s(r._viewer_properties),s}),define("modules/core/accessible_announce",["require","exports","jquery","external/purify","modules/clean/css"],function(t,e,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(function(){function t(){}return t.polite=function(t,e){return void 0===e&&(e=10),this.announce("polite",t,e)},t.assertive=function(t,e){return void 0===e&&(e=10),this.announce("assertive",t,e)},t.clear=function(){return this.lastTimeout&&clearTimeout(this.lastTimeout),n("#accessible-announce").html("").attr("aria-live","off")},t.announce=function(t,e,r){var i=this;return void 0===r&&(r=10),o.require_css("/static/css/accessibility-vflMqZNeg.css",function(){return n("#accessible-announce").length?(i.setMessage(e,t),i.scheduleClear(r)):(n("body").append("<div id='accessible-announce' aria-live='assertive' class='ax-visually-hidden'></div>"),setTimeout(function(){return i.setMessage(e,t),i.scheduleClear(r)},i.TIMEOUT_LENGTH))})},t.setMessage=function(t,e){this.clear();var o=n("#accessible-announce");o.attr("aria-live",e),t.toHTML?o.html(r.sanitize(t.toHTML())):"string"==typeof t?o.text(t):t instanceof n&&o.html(r.sanitize(t.html()))},t.scheduleClear=function(t){return this.lastTimeout=setTimeout(this.clear,1e3*t)},t})();i.TIMEOUT_LENGTH=50,e.AccessibleAnnounce=i}),define("modules/core/browser",["require","exports","modules/constants/env","modules/core/exception","modules/core/uri"],function(t,e,n,r,o){"use strict";function i(t){t=t.toLowerCase();var e=/(ipad)/.exec(t)||/(edge)[ \/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||/(trident).*? rv:([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],n=t.match(/version\/([\d.]+)/i),r=null!=n?e[1]:null;return{browser:e[1]||"",version:r||e[2]||"0"}}function s(t){return Boolean(e.msie)&&parseInt(e.version,10)<=t}function u(t){return Boolean(e.safari)&&parseInt(e.version,10)<=t}function a(t){return void 0===t&&(t=window),t.location.href}function c(t){return void 0===t&&(t=window),t.location.hostname}function l(t){return void 0===t&&(t=window),o.parse(a(t))}function d(){return window.location.hash.split("#")[1]}function _(){return a().split("#")[0]}function p(t){window.location.hash=t}function h(t){var n=e.mockableInternalMethods._parse_target(t);window.open(n,"_blank")}function f(t){return t=e.mockableInternalMethods._parse_target(t,{checkDomainWhitelist:!1,httpsOnly:!1}),window.open(t,"_blank")}function g(t,n){void 0===n&&(n=window);var r=e.mockableInternalMethods._parse_target(t,{target_window:n});e.mockableInternalMethods._navigate(r,n)}function m(t){var n=e.mockableInternalMethods._parse_target(t);window.location.replace(n)}function v(t){void 0===t&&(t=!1),window.location.reload(t)}function y(){return window.performance||null}function w(){var t=y();return t&&t.now&&t.timing?Math.round(t.now()+t.timing.navigationStart):Date.now()}function b(t){t=e.mockableInternalMethods._parse_target(t,{checkDomainWhitelist:!1,httpsOnly:!1}),e.mockableInternalMethods._navigate(t)}function E(){if(window.matchMedia){return Boolean(window.matchMedia("(-webkit-min-device-pixel-ratio: 1.1), (min-resolution: 192dpx), (min-resolution: 1.1dppx)").matches)}return!!window.devicePixelRatio&&window.devicePixelRatio>1.1}function x(){return window.navigator.onLine}function A(t){window.addEventListener("online",t),window.addEventListener("offline",t)}function S(t){window.removeEventListener("online",t),window.removeEventListener("offline",t)}function T(t){void 0===t&&(t=navigator.userAgent);var n=(t||"").toLowerCase();return e.ipod||e.iphone||n.indexOf("tizen")!==-1||n.indexOf("android")!==-1&&n.indexOf("mobile")!==-1||n.indexOf("bb10")!==-1||n.indexOf("netfront")!==-1||/windows phone|opera mini|blackberry|nokia/.test(n)||n.indexOf("firefox")!==-1&&n.indexOf("mobile")!==-1||n.indexOf("googlebot-mobile")!==-1||n.indexOf("iemobile")!==-1||n.indexOf("opera mobi")!==-1||/ucweb|ucbrowser/.test(n)||n.indexOf("microsoft office mobile")!==-1}function O(t){void 0===t&&(t=navigator.userAgent);var e=(t||"").toLowerCase();return e.indexOf("android")!==-1||e.indexOf("silk")!==-1}function C(t){return void 0===t&&(t=navigator.userAgent),e.ipad||O(t)&&!T(t)}function k(t){return void 0===t&&(t=navigator.userAgent),T(t)||C(t)}function F(){return"hidden"===window.document.visibilityState}Object.defineProperty(e,"__esModule",{value:!0});var D=i(navigator.userAgent);"trident"===D.browser&&(D.browser="msie");var L=n.REDIRECT_SAFE_ORIGINS;e.ipad="ipad"===D.browser||void 0,e.chrome="chrome"===D.browser||void 0,e.safari=!("webkit"!==D.browser&&!Boolean(e.ipad))||void 0,e.opera="opera"===D.browser||void 0,e.msie="msie"===D.browser||void 0,e.edge="edge"===D.browser||void 0,e.mozilla="mozilla"===D.browser||void 0,e.webkit=!("webkit"!==D.browser&&!Boolean(e.ipad)&&!Boolean(e.chrome))||void 0,e.mac=Boolean(/(macintosh)/.exec(navigator.userAgent.toLowerCase())),e.iphone=Boolean(/(iphone)/.exec(navigator.userAgent.toLowerCase())),e.ipod=Boolean(/(ipod)/.exec(navigator.userAgent.toLowerCase())),e.iOS=e.ipad||e.ipod||e.iphone,e.browser_name=D.browser,e.version=D.version,e.msie_version_at_most=s,e.safari_version_at_most=u,e.get_href=a,e.get_hostname=c,e.get_uri=l,e.get_hash=d,e.get_href_no_hash=_,e.set_hash=p,e.mockableInternalMethods={_navigate:function(t,e){void 0===e&&(e=window),e.location.href=t},_parse_target:function(t,e){var n=void 0===e?{}:e,o=n.target_window,i=void 0===o?window:o,s=n.checkDomainWhitelist,u=void 0===s||s,a=n.httpsOnly,c=void 0===a||a,l=i.document.createElement("a");l.href=t;var d=l.protocol||i.location.protocol;":"===l.protocol&&(d=i.location.protocol);var _=l.hostname||i.location.hostname,p=l.port||i.location.port;"443"===p&&"https:"===d&&(p=""),u&&r.assert(!p,"Non-default port not legal when checking the whitelist.");var h=0===l.pathname.indexOf("/")?l.pathname:"/"+l.pathname;c?r.assert("https:"===d,"Target URI must be secure"):r.assert("data:"!==d&&"javascript:"!==d&&"vbscript:"!==d,"Target URI can't use the data or javascript scheme"),u&&r.assert(L.indexOf(_)>-1,"Target URI must be in the domain whitelist");var f=_;return p&&(f=f+":"+p),t=d+"//"+f+h+l.search+l.hash}},e.open_tab=h,e.unsafe_open_tab=f,e.redirect=g,e.replace_location=m,e.reload=v,e.performance=y,e.now=w,e.unsafeRedirect=b,e.is_high_density_display=E,e.isOnline=x,e.subscribeConnectivityStatusChange=A,e.unsubscribeConnectivityStatusChange=S,e.is_supported_mobile_browser=T,e.is_tablet=C,e.is_mobile_or_tablet=k,e.is_page_content_hidden=F}),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};define("modules/core/dom",["jquery","modules/clean/keycode"],function(e,n){var r,o,i,s,u,a,c,l,d,_,p,h,f,g,m,v,y,w,b,E,x,A,S,T,O,C,k;return o=n.KeyCode,r="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",i="no-scroll",v=function(t){return!!t&&(1===t.nodeType||t.length>=1&&1===t[0].nodeType)},h=function(){return y(document.activeElement)},y=function(t){var e,n;return("INPUT"===(e=null!=t?t.tagName:void 0)||"TEXTAREA"===e||"SELECT"===e)&&"submit"!==(n=null!=t?t.type:void 0)&&"button"!==n||m(t)},m=function(t){return(null!=t?t.hasAttribute:void 0)&&(null!=t?t.hasAttribute("contenteditable"):void 0)&&"false"!==(null!=t?t.getAttribute("contenteditable").toLowerCase():void 0)},k=function(t){var n,r,o;return n=e(t),o=n.offset(),r=e(window),{left:o.left-r.scrollLeft(),top:o.top-r.scrollTop()}},u=null,a=null,C=function(){return u||(u={height:e(window).height(),width:e(window).width()}),a||(a=e(window).on("resize",function(){return u=null})),u},_=function(){return Math.max(e(document).height(),e(window).height(),document.documentElement.clientHeight)},c=null,s=null,S=function(){var t,n;return c||(c=e(window).scroll(function(){return s=null})),w()?s||(n=e(window).scrollTop(),t=e(window).scrollLeft(),s={0:t,1:n,left:t,top:n}):(n=l.top,t=l.left,s={0:t,1:n,left:t,top:n}),s},E=function(){return s=null},w=function(){return!e(document.documentElement).hasClass(i)},A=0,l=null,x=function(){var t,n,r;if(A++,t=e(document.documentElement),!t.hasClass(i))return l=S(),r=-1*l.top+"px",n=-1*l.left+"px",t.css({top:r,left:n}),t.addClass(i)},O=function(){var t,n,r;if(A>0&&A--,t=e(document.documentElement),0===A&&t.hasClass(i))return r=l.top,n=l.left,t.css({top:"",left:""}),t.removeClass(i),T(n,r+1),T(n,r-1),T(n,r)},T=function(t,n){var r,o,i;return t=Math.max(t,0),n=Math.max(n,0),n>S().top&&(n=Math.min(n,_()-p.viewport_dimensions().height)),w()?(window.scrollTo(t,n),s={0:t,1:n,left:t,top:n}):(l={0:t,1:n,left:t,top:n},i=-1*n+"px",o=-1*t+"px",r=e(document.documentElement),r.css({top:i,left:o}))},d=function(t,n,r){var o,i,s,u,a,c,l,d;return i=e(n),s=e(t),c={setLeft:!0,setTop:!0,setWidth:!0,setHeight:!0,offsetTop:0,offsetLeft:0},r=e.extend({},c,r),d=k(i),l={top:0,left:0},o=null,"absolute"===s.css("position")&&(o=s.offsetParent(),l=k(o)),o&&o[0]===document.body&&(l.left-=document.body.offsetLeft,l.top-=document.body.offsetTop),r.setLeft&&(u=d.left-l.left+r.offsetLeft+"px",s.css("left",u)),r.setTop&&(a=d.top-l.top+r.offsetTop+"px",s.css("top",a)),r.setWidth&&s.width(i[0].offsetWidth),r.setHeight&&s.height(i[0].offsetHeight),s},k=function(t){var n,r,o;return n=e(t),o=n.offset(),r=e(window),{left:o.left-r.scrollLeft(),top:o.top-r.scrollTop()}},f=function(t,n){var o;return o=e(t).find(r).filter(function(){return!!(this.offsetWidth&&this.offsetHeight||this.getClientRects().length)}),n?o.not('*[tabindex="-1"]'):o},g=function(t){var e,n,r,o;return o=f(t,!0),e=o.filter('*:not([tabindex]), *[tabindex="0"]'),r=o.not(e).toArray(),r.length?(n=function(t,e){var n,r;return n=parseInt(t.getAttribute("tabindex"),10),r=parseInt(e.getAttribute("tabindex"),10),n-r},r.sort(n),r.concat(e.toArray())):e.toArray()},b=function(e,n){var r,i,s,u,a,c,l,d,_;if(n.which===o.TAB&&(d=p.getTabbableElementsIn(e),d.length)){if(_=d.indexOf(n.target),_===-1){if(n.preventDefault(),s=p.getFocusableElementsIn(e).toArray(),n.shiftKey&&s.reverse(),u=s.indexOf(n.target),u===-1)return d[0].focus();for(i=null,l=s.slice(u),a=0,c=l.length;a<c;a++)if(r=l[a],t.call(d,r)>=0){i=r;break}return i?i.focus():n.shiftKey?d[d.length-1].focus():d[0].focus()}if(n.shiftKey){if(0===_)return n.preventDefault(),d[d.length-1].focus()}else if(_===d.length-1)return n.preventDefault(),d[0].focus()}},p={clone_position:d,document_height:_,focus_in_input:h,is_input:y,is_content_editable:m,is_page_scrollable:w,scroll_clear_cache:E,scroll_lock_document:x,scroll_offsets:S,scroll_to:T,scroll_unlock_document:O,is_element:v,viewport_offset:k,viewport_dimensions:C,getFocusableElementsIn:f,getTabbableElementsIn:g,keepFocusIn:b}})}.call(this),function(){define("modules/core/html",["jquery","external/underscore","modules/constants/page_load"],function(t,e,n){var r;return r=(function(){function t(t){this._str_DONT_TOUCH=t}return t.prototype.toHTML=function(){return this._str_DONT_TOUCH},t.prototype.toString=function(){return"[object HTML]"},t})(),(function(){var o,i,s;return r.tmpl=function(o,i){var s,u,a,c;return/[^\w:.-]/.test(o)||(u=document.getElementById(o),o=u.innerHTML,n.CSP_SCRIPT_NONCE!==(u.nonce||u.getAttribute("nonce"))&&(o="")),c=o.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.*?)%>/g,"',__no_conflict_HTML__._raw_escape($1),'").split("<%").join("');").split("%>").join("p.push('"),s=new Function("__no_conflict_HTML__","__no_conflict_jQuery__","TEMPLATE_DATA","var p=[],print=function(){p.push.apply(p,arguments);}; p.push('"+c+"'); return new __no_conflict_HTML__(__no_conflict_jQuery__.trim(p.join('')));"),a=e.partial(s,r,t),i?a(i):a},o=/[^\w@\.\ \-\(\)\,\$~%#\[\]\{\}\!\^]/g,s=function(t){return"&#"+t.charCodeAt(0)+";"},i=function(t){return(""+t).replace(o,s)},r.escape=function(t){return t instanceof r?t:new r(i(t))},r._raw_escape=function(t){return t instanceof r?t.toHTML():"number"==typeof t?t:i(t)}})(),r})}.call(this),define("modules/core/notify",["require","exports","jquery","modules/core/accessible_announce"],function(t,e,n,r){"use strict";return(function(){function t(){}return t.success=function(t,e){return void 0===e&&(e=10),r.AccessibleAnnounce.polite(t,e+1),this._show(t,e,"server-success"),this.current()},t.error=function(t,e){return void 0===e&&(e=10),r.AccessibleAnnounce.assertive(t,e+1),this._show(t,e,"server-error"),this.current()},t.warning=function(t,e){return void 0===e&&(e=10),r.AccessibleAnnounce.polite(t,e+1),this._show(t,e,"server-warning"),this.current()},t.info=function(t,e){return void 0===e&&(e=10),r.AccessibleAnnounce.polite(t,e+1),this._show(t,e,"server-info"),this.current()},t.clear=function(){this._last_timeout&&clearTimeout(this._last_timeout),this._last_animation&&this._last_animation.stop(),this._last_timeout=null,this._last_animation=null,n("#notify").removeClass("server-error server-info server-success server-warning").hide()},t.isShown=function(){return n("#notify").is(":visible")},t.current=function(){return this._last_timeout},t._show=function(t,e,n){return this._buildElement(),this.clear(),this._setMessage(t),this._showElement(n),this._scheduleHide(e),this.current()},t._buildElement=function(){if(!n("#notify").length){n("body").append('<div id="notify-wrapper" class="notify-wrapper"> <span id="notify" style="display: inline-block"> <span id="notify-msg" class="notify-msg" /> </span> </div>'),n(".maestro .has-top-notification").length&&n("#notify-wrapper").addClass("with-top-notification")}},t._setMessage=function(t){var e=n("#notify-msg");t.toHTML?e.html(t.toHTML()):"string"==typeof t?e.text(t):t instanceof n&&(e.empty(),e.append(t))},t._showElement=function(t){var e=n("#notify");e.addClass(t),this._last_animation=e.fadeIn(500)},t._scheduleHide=function(t){this._last_timeout=setTimeout(this._hide,1e3*t)},t._hide=function(){var t=n("#notify");return this._last_animation=t.fadeOut(1e3),this._last_timeout=null},t})()}),define("modules/core/uri",["require","exports","modules/core/exception"],function(t,e,n){"use strict";var r=(function(){function t(e){if(void 0===e&&(e={}),!(this instanceof t))return new t(e);this.query=new o,this.initFromObject(e)}return t.prototype.initFromObject=function(t){this.setScheme(t.scheme),this.authority=t.authority||"",this.path=t.path||"",this.setQuery(t.query),this.fragment=t.fragment||""},t.prototype.getScheme=function(){return this.scheme},t.prototype.getAuthority=function(){return this.authority},t.prototype.getPath=function(){return this.path},t.prototype.getQuery=function(){return this.query.dict},t.prototype.getFragment=function(){return this.fragment},t.prototype.setScheme=function(t){return void 0===t&&(t=""),n.assert(!t||Boolean(t.match(/^[a-zA-Z][a-zA-Z0-9+.\-]*$/)),"Invalid scheme",{exc_extra:{scheme_param:t}}),this.scheme=t,this},t.prototype.setAuthority=function(t){return void 0===t&&(t=""),this.authority=t,this},t.prototype.setPath=function(t){return void 0===t&&(t=""),this.path=t,this},t.prototype.setQuery=function(t){return void 0===t&&(t={}),this.query=new o(t),this},t.prototype.setFragment=function(t){return void 0===t&&(t=""),this.fragment=t,this},t.prototype.updateQuery=function(t,e){return this.query.add(t,e),this},t.prototype.removeQuery=function(t){return this.query.remove(t),this},t.prototype.clone=function(){return new t(this.toObject())},t.prototype.toObject=function(){return{scheme:this.getScheme(),authority:this.getAuthority(),path:this.getPath(),query:this.getQuery(),fragment:this.getFragment()}},t.prototype.toString=function(){var e="";this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+t.encode(this.authority,":@[]")),this.path&&(n.assert(!this.authority||!this.path.length||"/"===this.path[0],'Path must start with a "/" if URI is not relative'),e+=t.encode(this.path,"/"));var r=this.query.toString();return r&&(e+="?"+r),this.fragment&&(e+="#"+t.encode(this.fragment,":@[]/&=+?#!")),e},t.parse=function(e){n.assert(null!=e,"must pass in a valid url-encoded string",{exc_extra:{uri_string_param:e}});var r=String(e).match(/^(?:([^:\/\\?#]+):)?(?:[\/\\]{2}([^\/\\?#]*))?([^?#]*)(?:\?([^#]*))?(?:[#](.*))?$/)||[],i=r[1],s=r[2],u=r[3],a=r[4],c=r[5],l=new t;return l.setScheme(i),l.setAuthority(t.decode(s)),l.setPath(t.decode(u)),l.setQuery(o.parseString(a)),l.setFragment(t.decode(c)),l},t.decode=function(t){return t?decodeURIComponent(t):""},t.encode=function(t,e){if(void 0===e&&(e=""),!t)return"";t=encodeURIComponent(t),e+="~";for(var n=0,r=e;n<r.length;n++){var o=r[n],i=encodeURIComponent(o);t=t.replace(new RegExp(i,"g"),o)}return t},t.encode_parts=function(e,n){return void 0===n&&(n="/"),e.split(n).map(function(e){return t.encode(e)}).join(n)},t})(),o=(function(){function t(t){void 0===t&&(t={}),this.dict={},this.add(t)}return t.parseString=function(e){if(!e)return{};var n={};return e.split("&").forEach(function(e){if(""!==e){var r=e.split("="),o=t.decode(r[0]),i=t.decode(r.slice(1).join("="));if(n.hasOwnProperty(o)){var s=n[o];"string"==typeof s&&(n[o]=[s]),n[o].push(i)}else n[o]=i}}),n},t.prototype.add=function(t,e){if("string"==typeof t)e&&(Array.isArray(e)?this.dict[t]=e.map(String):this.dict[t]=String(e));else for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];null!=r&&(Array.isArray(r)?this.dict[n]=r.map(String):this.dict[n]=String(r))}return this},t.prototype.remove=function(t){return delete this.dict[t],this},t.prototype.replace=function(t){return this.dict=t,this},t.prototype.toString=function(){for(var e=[],n=Object.keys(this.dict).sort(),r=function(n){if(o.dict.hasOwnProperty(n)){var r=o.dict[n];Array.isArray(r)?r.forEach(function(r){e.push(t.encode(n)+"="+t.encode(r))}):e.push(t.encode(n)+"="+t.encode(r))}},o=this,i=0,s=n;i<s.length;i++){r(s[i])}return e.length?e.join("&"):""},t.decode=function(t){return null==t?"":r.decode(t.replace(/\+/g,"%20"))},t.encode=function(t){return null==t?"":r.encode(t).replace(/%20/g,"+")},t})();return(function(t){t.Query=o})(r||(r={})),r});
//# sourceMappingURL=pkg-core.min.js-vfl--9JqS.map