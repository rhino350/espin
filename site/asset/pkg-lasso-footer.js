define("modules/clean/react/lasso/footer",["require","exports","tslib","modules/clean/loggers/growth_features_events_logger","external/react","modules/clean/react/title_bubble","modules/clean/react/locale_selector","external/spectrum/overflow_button","external/spectrum/popover"],function(e,o,t,n,l,r,a,s,c){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=a.LocaleSelectorModal,u=(function(o){function a(t){var l=o.call(this,t)||this;return l.noop=function(){},l.loadComponent=function(o){e(["modules/clean/web_timing_logger"],function(t){(0,t.waitForTTI)().then(function(){e(["modules/clean/react/modal"],function(e){l.setState({modal:e}),o()})})})},l.logLinkClick=function(e){n.logLassoEvent("footer_button_clicked",{buttonText:e.currentTarget.text,buttonHref:e.currentTarget.href})},l.handleLinkSelection=function(e,o){l.logLinkClick(o),"language-button"===o.currentTarget.id&&l.showLocaleModal()},l.onMouseEnter=function(e){l.setState({hasMouseOver:!0})},l.onMouseLeave=function(e){l.setState({hasMouseOver:!1})},l.state={hasMouseOver:!1},l}return t.__extends(a,o),a.prototype.componentDidMount=function(){this.loadComponent(this.noop)},a.prototype.renderPopoverContentItem=function(e){return l.createElement(c.PopoverContentItem,{className:"other-link",key:e.text.toLowerCase(),href:e.href,target:"_blank",rel:"noopener noreferrer"},e.text)},a.prototype.renderPopoverContentItems=function(){var e=this,o=[];this.props.otherLinks.forEach(function(t){var n=e.renderPopoverContentItem(t);o.push(n)});var t=l.createElement(c.PopoverContentItem,{className:"other-link",key:"language",id:"language-button",href:"#"},this.props.buttonContent.language);return o.push(t),o},a.prototype.showLocaleModal=function(){var e=this.state.modal;e?e.Modal.showInstance(l.createElement(i,null)):this.loadComponent(this.showLocaleModal)},a.prototype.render=function(){var e=this.props,o=e.buttonContent,t=e.privacyHref,n=e.helpHref,a=this.state.hasMouseOver?"secondary":"borderless";return l.createElement("footer",{className:"lasso-footer",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},l.createElement("div",{id:"page-footer"},l.createElement(c.Popover,{className:"other-links",onSelection:this.handleLinkSelection},l.createElement(c.PopoverTrigger,null,l.createElement(s.OverflowButton,{tagName:"span","aria-label":o.more,variant:a})),l.createElement(c.PopoverContent,{attachment:"right",position:"above"},this.renderPopoverContentItems())),l.createElement("a",{className:"privacy-link",href:t,onClick:this.logLinkClick,target:"_blank",rel:"noopener noreferrer"},o.privacy),l.createElement(r,{content:o.help,position:r.POSITIONS.TOP,isTargetPositionFixed:!1,distanceFromTarget:5},l.createElement("a",{className:"help-button",href:n,onClick:this.logLinkClick,target:"_blank",rel:"noopener noreferrer"},"?"))))},a})(l.Component);o.LassoFooter=u}),function(){define("modules/clean/react/locale_selector",["jquery","external/react","external/underscore","modules/core/i18n","modules/core/exception","modules/clean/ajax","modules/clean/react/css","modules/clean/react/modal","modules/clean/react/sprite","modules/constants/locales","modules/constants/page_load","modules/core/browser","modules/core/notify","modules/core/uri"],function(e,o,t,n,l,r,a,s,c,i,u,d,p,m){var h,f,g,_,L,C,v,b,T,k;return L=n._,_=s.Modal,k=o.DOM,b=o.createElement,v=function(e,o,t){var n;return null==t&&(t=!1),n=t?"/team/admin/set_locale":"/set_locale",p.success(L("Changing language...")),r.SilentBackgroundRequest({url:m({path:n}),data:{locale:e,locale_cont:o},success:function(){return d.redirect(o)}})},g=o.createClass({displayName:"LocaleTag",propTypes:{locale:o.PropTypes.shape({localeCode:o.PropTypes.string.isRequired,localeName:o.PropTypes.string.isRequired,decorator:o.PropTypes.string.isRequired}).isRequired},render:function(){var e;return e=this.props.locale.localeName,""!==this.props.locale.decorator&&(e+=" ["+this.props.locale.decorator+"]"),k.span({"data-locale":this.props.locale.localeCode},e)}}),C=o.createClass({displayName:"LocaleSelectorModal",propTypes:{isTeamAdminSettingsConsole:o.PropTypes.bool.isRequired,shouldAllowInternalLocales:o.PropTypes.bool.isRequired,isRebrand:o.PropTypes.bool.isRequired},handleCloseModal:function(e){return history.pushState("",document.title,d.get_href_no_hash())},handleLocaleSelected:function(e){return(function(o){return function(t){return t.preventDefault(),history.pushState("",document.title,d.get_href_no_hash()),_.close(),v(e,d.get_href_no_hash(),o.props.isTeamAdminSettingsConsole)}})(this)},_renderLocaleList:function(){var e,o;return o=this.props.shouldAllowInternalLocales?i.LIST_OF_LOCALES_WITH_INTERNAL:i.LIST_OF_LOCALES_WITHOUT_INTERNAL,k.div({className:"react-locale-selector-modal"},k.ul({className:"react-locale-selector-modal__list u-unlist u-trim-padding"},function(){var t,n,l;for(l=[],t=0,n=o.length;t<n;t++)e=o[t],l.push(this._renderLocale(e));return l}.call(this)))},_renderLocale:function(e){return k.li({key:e.localeCode},k.button({className:"locale-option button-as-link react-locale-selector-modal__list-item-button",onClick:this.handleLocaleSelected(e.localeCode).bind(this)},b(g,{locale:e})))},render:function(){var e,o,t;return o="default",t=550,this.props.isRebrand&&(o="simple",t=null,e="rebrand-locale-modal"),b(_,{onDismissCompleted:this.handleCloseModal,className:e,ref:"modal",width:t,title:L("Choose a language"),acceptButtonText:null,style:o},this._renderLocaleList())}}),f=a(C,["/static/css/components/react_locale_selector-vflfLW0w_.css","/static/css/modal-vfls56Rdx.css"]),h=o.createClass({displayName:"LocaleSelector",statics:{showModal:function(e,o){return null==e&&(e=!1),null==o&&(o=!0),_.showInstance(b(f,{isTeamAdminSettingsConsole:e,shouldAllowInternalLocales:o}))}},propTypes:{isTeamAdminSettingsConsole:o.PropTypes.bool,shouldAllowInternalLocales:o.PropTypes.bool,isRebrand:o.PropTypes.bool},getDefaultProps:function(){return{isTeamAdminSettingsConsole:!1,shouldAllowInternalLocales:!0,isRebrand:!1}},handleLocaleLinkClick:function(e){return e.preventDefault(),_.showInstance(b(f,{isTeamAdminSettingsConsole:this.props.isTeamAdminSettingsConsole,shouldAllowInternalLocales:this.props.shouldAllowInternalLocales,isRebrand:this.props.isRebrand}))},_renderLocaleLink:function(){return k.span({id:"locale-link"},b(c,{group:"web",name:"globe_gray_20x20",alt:""}),k.button({className:"button-as-link react-locale-selector-link",title:L("Choose a language"),onClick:this.handleLocaleLinkClick},b(g,{locale:t.find(i.LIST_OF_LOCALES_WITH_INTERNAL,function(e){return e.localeCode===u.USER_LOCALE})}),b(c,{class:"arrow",group:"web",name:"arrow-up-gray",alt:""})))},render:function(){return k.div({id:"locale-container"},this._renderLocaleLink())}}),T=a(h,["/static/css/legacy_packages/components-vflfWNhxV.css"]),{LocaleSelectorModal:f,LocaleSelector:T,initialize_module:function(o){if(null!=o?o.dom_id:void 0)return e(document).ready(function(){return e("#"+o.dom_id).click(function(){return T.wrappedClass.showModal()})})}}})}.call(this);
//# sourceMappingURL=pkg-lasso-footer.min.js-vflbjp5wn.map